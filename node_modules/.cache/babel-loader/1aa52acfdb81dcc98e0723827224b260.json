{"ast":null,"code":"var _jsxFileName = \"/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js\";\nimport React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking, createFirstLogin } from \"../graphql/mutations\";\nimport { listTrackings } from '../graphql/queries';\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nimport firstSurvey from '../survey/FirstServey';\nimport finalSurvey from '../survey/FinalSurvey';\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isCompleted: false,\n      finalResult: \"\"\n    };\n\n    this.onCompleteComponent = async result => {\n      var hotelLocation = \"\";\n\n      try {\n        console.log(this.props.hotelLocation);\n\n        if (this.props.hotelLocation === \"\") {\n          hotelLocation = result.data.HotelLocation;\n          await API.graphql(graphqlOperation(createFirstLogin, {\n            input: {\n              'Email': this.props.userAttributes.email,\n              'Sub': this.props.userAttributes.sub,\n              'LocationHotel': result.data.HotelLocation\n            }\n          }));\n        } else {\n          hotelLocation = this.props.hotelLocation;\n        }\n\n        const trakings = await API.graphql(graphqlOperation(listTrackings, {\n          filter: {\n            and: [{\n              Sub: {\n                eq: this.props.userAttributes.sub\n              },\n              Week: {\n                eq: 'W1'\n              }\n            }]\n          }\n        }));\n\n        if (trakings.data.listTrackings.items.length === 0) {\n          console.log(result.data);\n          console.log(this.props.hotelLocation);\n          var Week = 'W1'; //Page1 \n\n          var HotelLocation = hotelLocation;\n          var IsHotelClosed = result.data.IsHotelClosed;\n          var HotelReopeningDate = result.data.HotelReopeningDate;\n          var IsHotelContainmentZone = result.data.isHotelContainmentZone;\n          var HotelContainmentEndDate = result.data.HotelContainmentEndDate; //Page 2\n\n          var NbBookings = NbBookings;\n          var NbRoomNightsBooked = NbRoomNightsBooked;\n          var NbRoomNightsCanceled = NbRoomNightsCanceled;\n          var SplitTotalRoomsBusinessSegment = result.data['SplitTotalRoomsBusinessSegment'];\n          var NbRoomNightsBookedFIT = 0;\n          var NbRoomNightsBookedMICE = 0;\n          var NbRoomNightsBookedCorporate = 0;\n          var RemainingRoomNightsBySegment = 0;\n\n          if (SplitTotalRoomsBusinessSegment) {\n            NbRoomNightsBookedFIT = SplitTotalRoomsBusinessSegment['FIT'] ? SplitTotalRoomsBusinessSegment['FIT'].NbRoomsNightsBS : 0;\n            NbRoomNightsBookedMICE = SplitTotalRoomsBusinessSegment['MICE'] ? SplitTotalRoomsBusinessSegment['MICE'].NbRoomsNightsBS : 0;\n            NbRoomNightsBookedCorporate = SplitTotalRoomsBusinessSegment['Corporate'] ? SplitTotalRoomsBusinessSegment['Corporate'].NbRoomsNightsBS : 0;\n          }\n\n          RemainingRoomNightsBySegment = result.data['SplitTotalRoomsBusinessSegment-total'].NbRoomsNightsBS; //TODO ADD Business Validation\n\n          var RoomsNightsSplit = result.data['RoomsNightsSplit'];\n          var RoomNightsCountry1 = null;\n          var NbRoomNightsBookedCountry1 = 0;\n          var RoomNightsCountry2 = null;\n          var NbRoomNightsBookedCountry2 = 0;\n          var RoomNightsCountry3 = null;\n          var NbRoomNightsBookedCountry3 = 0;\n          var RoomNightsCountry4 = null;\n          var NbRoomNightsBookedCountry4 = 0;\n          var RoomNightsCountry5 = null;\n          var NbRoomNightsBookedCountry5 = 0;\n\n          if (RoomsNightsSplit) {\n            RoomNightsCountry1 = RoomsNightsSplit['Country1'] ? RoomsNightsSplit['Country1'].Country : \"\";\n            NbRoomNightsBookedCountry1 = RoomsNightsSplit['Country1'] ? RoomsNightsSplit['Country1'].NbRoomNights : 0;\n            RoomNightsCountry2 = RoomsNightsSplit['Country2'] ? RoomsNightsSplit['Country2'].Country : \"\";\n            NbRoomNightsBookedCountry2 = RoomsNightsSplit['Country2'] ? RoomsNightsSplit['Country2'].NbRoomNights : 0;\n            RoomNightsCountry3 = RoomsNightsSplit['Country3'] ? RoomsNightsSplit['Country3'].Country : \"\";\n            NbRoomNightsBookedCountry3 = RoomsNightsSplit['Country3'] ? RoomsNightsSplit['Country3'].NbRoomNights : 0;\n            RoomNightsCountry4 = RoomsNightsSplit['Country4'] ? RoomsNightsSplit['Country4'].Country : \"\";\n            NbRoomNightsBookedCountry4 = RoomsNightsSplit['Country4'] ? RoomsNightsSplit['Country4'].NbRoomNights : 0;\n            RoomNightsCountry5 = RoomsNightsSplit['Country5'] ? RoomsNightsSplit['Country5'].Country : \"\";\n            NbRoomNightsBookedCountry5 = RoomsNightsSplit['Country5'] ? RoomsNightsSplit['Country5'].NbRoomNights : 0;\n          }\n\n          console.log(RoomNightsCountry1);\n          console.log(NbRoomNightsBookedCountry1);\n          console.log(RoomNightsCountry2);\n          console.log(NbRoomNightsBookedCountry2);\n          var SplitByMonth = result.data['SplitByMonth'];\n          var NbRoomNightsBookedLastWeekApril = 0;\n          var NbRoomNightsBookedLastWeekMay = 0;\n          var NbRoomNightsBookedLastWeekJune = 0;\n          var NbRoomNightsBookedLastWeekJuly = 0;\n          var NbRoomNightsBookedLastWeekAugust = 0;\n          var NbRoomNightsBookedLastWeekSeptember = 0;\n          var TotalNightsBookedLastWeek = 0;\n\n          if (SplitByMonth) {\n            NbRoomNightsBookedLastWeekApril = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M1 : 0;\n            NbRoomNightsBookedLastWeekMay = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M2 : 0;\n            NbRoomNightsBookedLastWeekJune = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M3 : 0;\n            NbRoomNightsBookedLastWeekJuly = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M4 : 0;\n            NbRoomNightsBookedLastWeekAugust = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M5 : 0;\n            NbRoomNightsBookedLastWeekSeptember = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M6 : 0;\n            TotalNightsBookedLastWeek = SplitByMonth['NbRoomsByMonth'] ? SplitByMonth['NbRoomsByMonth'].M7 : 0;\n          }\n\n          console.log(NbRoomNightsBookedLastWeekApril);\n          console.log(NbRoomNightsBookedLastWeekMay); //Page 3\n\n          var TotalNumberRoomAvailable = result.data.TotalNumberRoomAvailable;\n          var SplitTotalRoomAvailable = result.data['SplitTotalRoomAvailable'];\n          var NbOccupiedRoomNightsAvril = null;\n          var NbOccupiedRoomNightsMay = null;\n          var NbOccupiedRoomNightsJune = null;\n          var NbOccupiedRoomNightsJuly = null;\n          var NbOccupiedRoomNightsAugust = null;\n          var NbOccupiedRoomNightsSeptember = null;\n          var NbTotalRoomNightsAvril = null;\n          var NbTotalRoomNightsMay = null;\n          var NbTotalRoomNightsJune = null;\n          var NbTotalRoomNightsJuly = null;\n          var NbTotalRoomNightsAugust = null;\n          var NbTotalRoomNightsSeptember = null;\n\n          if (SplitTotalRoomAvailable) {\n            NbOccupiedRoomNightsAvril = SplitTotalRoomAvailable['NbOfOccupiedRooms'] ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1 ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1 : 0 : 0;\n            NbOccupiedRoomNightsMay = SplitTotalRoomAvailable['NbOfOccupiedRooms'] ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2 ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2 : 0 : 0;\n            NbOccupiedRoomNightsJune = SplitTotalRoomAvailable['NbOfOccupiedRooms'] ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3 ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3 : 0 : 0;\n            NbOccupiedRoomNightsJuly = SplitTotalRoomAvailable['NbOfOccupiedRooms'] ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4 ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4 : 0 : 0;\n            NbOccupiedRoomNightsAugust = SplitTotalRoomAvailable['NbOfOccupiedRooms'] ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5 ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5 : 0 : 0;\n            NbOccupiedRoomNightsSeptember = SplitTotalRoomAvailable['NbOfOccupiedRooms'] ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6 ? SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6 : 0 : 0;\n            NbTotalRoomNightsAvril = SplitTotalRoomAvailable['TotalRoomNightAvailable'] ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1 ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1 : 0 : 0;\n            NbTotalRoomNightsMay = SplitTotalRoomAvailable['TotalRoomNightAvailable'] ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2 ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2 : 0 : 0;\n            NbTotalRoomNightsJune = SplitTotalRoomAvailable['TotalRoomNightAvailable'] ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3 ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3 : 0 : 0;\n            NbTotalRoomNightsJuly = SplitTotalRoomAvailable['TotalRoomNightAvailable'] ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4 ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4 : 0 : 0;\n            NbTotalRoomNightsAugust = SplitTotalRoomAvailable['TotalRoomNightAvailable'] ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5 ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5 : 0 : 0;\n            NbTotalRoomNightsSeptember = SplitTotalRoomAvailable['TotalRoomNightAvailable'] ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6 ? SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6 : 0 : 0;\n          }\n\n          var SplitTotalRoomAvailable = result.data['SplitTotalRoomAvailable-total'];\n          var OccupancyRateApril = null;\n          var OccupancyRateMay = null;\n          var OccupancyRateJune = null;\n          var OccupancyRateJuly = null;\n          var OccupancyRateAugust = null;\n          var OccupancyRateSeptember = null;\n\n          if (SplitTotalRoomAvailable) {\n            OccupancyRateApril = SplitTotalRoomAvailable.M1 ? SplitTotalRoomAvailable.M1 : null;\n            OccupancyRateMay = SplitTotalRoomAvailable.M2 ? SplitTotalRoomAvailable.M2 : null;\n            OccupancyRateJune = SplitTotalRoomAvailable.M3 ? SplitTotalRoomAvailable.M3 : null;\n            OccupancyRateJuly = SplitTotalRoomAvailable.M4 ? SplitTotalRoomAvailable.M4 : null;\n            OccupancyRateAugust = SplitTotalRoomAvailable.M5 ? SplitTotalRoomAvailable.M5 : null;\n            OccupancyRateSeptember = SplitTotalRoomAvailable.M6 ? SplitTotalRoomAvailable.M6 : null;\n          } //\n\n\n          var Result = result.data; //await API.graphql(graphqlOperation(createTracking, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub, Week }}));\n\n          await API.graphql(graphqlOperation(createSurvey, {\n            input: {\n              IsHotelClosed,\n              IsHotelContainmentZone,\n              HotelContainmentEndDate,\n              HotelReopeningDate,\n              NbBookings,\n              NbRoomNightsBooked,\n              NbRoomNightsCanceled,\n              NbRoomNightsBookedFIT,\n              NbRoomNightsBookedMICE,\n              NbRoomNightsBookedCorporate,\n              RemainingRoomNightsBySegment,\n              RoomNightsCountry1,\n              NbRoomNightsBookedCountry1,\n              RoomNightsCountry2,\n              NbRoomNightsBookedCountry2,\n              RoomNightsCountry3,\n              NbRoomNightsBookedCountry3,\n              RoomNightsCountry4,\n              NbRoomNightsBookedCountry4,\n              RoomNightsCountry5,\n              NbRoomNightsBookedCountry5,\n              NbRoomNightsBookedLastWeekApril,\n              NbRoomNightsBookedLastWeekMay,\n              NbRoomNightsBookedLastWeekAugust,\n              NbRoomNightsBookedLastWeekSeptember,\n              TotalNightsBookedLastWeek,\n              NbRoomNightsBookedLastWeekJune,\n              NbRoomNightsBookedLastWeekJuly,\n              TotalNumberRoomAvailable,\n              NbOccupiedRoomNightsAvril,\n              NbOccupiedRoomNightsAugust,\n              NbOccupiedRoomNightsJuly,\n              NbOccupiedRoomNightsJune,\n              NbOccupiedRoomNightsMay,\n              NbOccupiedRoomNightsSeptember,\n              NbTotalRoomNightsAugust,\n              NbTotalRoomNightsAvril,\n              NbTotalRoomNightsJuly,\n              NbTotalRoomNightsJune,\n              NbTotalRoomNightsMay,\n              NbTotalRoomNightsSeptember,\n              OccupancyRateApril,\n              OccupancyRateAugust,\n              OccupancyRateJuly,\n              OccupancyRateJune,\n              OccupancyRateMay,\n              OccupancyRateSeptember,\n              Week,\n              Result,\n              HotelLocation\n            }\n          }));\n          this.setState({\n            isCompleted: true\n          });\n          history.push('/Final');\n        } else {\n          history.push('/FinalRetry');\n        }\n      } catch (err) {\n        console.error(\"error during delete\", err);\n      }\n    };\n  }\n\n  render() {\n    var json = this.props.hotelLocation === \"\" ? firstSurvey : finalSurvey;\n    var surveyRender = !this.state.isCompleted ? /*#__PURE__*/React.createElement(Survey.Survey, {\n      json: json //data={data}\n      ,\n      showCompletedPage: false,\n      onComplete: this.onCompleteComponent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }\n    }) : null;\n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 7\n      }\n    }, surveyRender);\n  }\n\n}\n\nexport default SurveyComponent;","map":{"version":3,"sources":["/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js"],"names":["React","Component","Survey","createSurvey","createTracking","createFirstLogin","listTrackings","graphqlOperation","API","history","firstSurvey","finalSurvey","StylesManager","applyTheme","SurveyComponent","state","isCompleted","finalResult","onCompleteComponent","result","hotelLocation","console","log","props","data","HotelLocation","graphql","input","userAttributes","email","sub","trakings","filter","and","Sub","eq","Week","items","length","IsHotelClosed","HotelReopeningDate","IsHotelContainmentZone","isHotelContainmentZone","HotelContainmentEndDate","NbBookings","NbRoomNightsBooked","NbRoomNightsCanceled","SplitTotalRoomsBusinessSegment","NbRoomNightsBookedFIT","NbRoomNightsBookedMICE","NbRoomNightsBookedCorporate","RemainingRoomNightsBySegment","NbRoomsNightsBS","RoomsNightsSplit","RoomNightsCountry1","NbRoomNightsBookedCountry1","RoomNightsCountry2","NbRoomNightsBookedCountry2","RoomNightsCountry3","NbRoomNightsBookedCountry3","RoomNightsCountry4","NbRoomNightsBookedCountry4","RoomNightsCountry5","NbRoomNightsBookedCountry5","Country","NbRoomNights","SplitByMonth","NbRoomNightsBookedLastWeekApril","NbRoomNightsBookedLastWeekMay","NbRoomNightsBookedLastWeekJune","NbRoomNightsBookedLastWeekJuly","NbRoomNightsBookedLastWeekAugust","NbRoomNightsBookedLastWeekSeptember","TotalNightsBookedLastWeek","M1","M2","M3","M4","M5","M6","M7","TotalNumberRoomAvailable","SplitTotalRoomAvailable","NbOccupiedRoomNightsAvril","NbOccupiedRoomNightsMay","NbOccupiedRoomNightsJune","NbOccupiedRoomNightsJuly","NbOccupiedRoomNightsAugust","NbOccupiedRoomNightsSeptember","NbTotalRoomNightsAvril","NbTotalRoomNightsMay","NbTotalRoomNightsJune","NbTotalRoomNightsJuly","NbTotalRoomNightsAugust","NbTotalRoomNightsSeptember","OccupancyRateApril","OccupancyRateMay","OccupancyRateJune","OccupancyRateJuly","OccupancyRateAugust","OccupancyRateSeptember","Result","setState","push","err","error","render","json","surveyRender"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking, createFirstLogin } from \"../graphql/mutations\";\nimport { listTrackings } from '../graphql/queries';\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nimport firstSurvey from '../survey/FirstServey';\nimport finalSurvey from '../survey/FinalSurvey';\n\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n\n  state = {\n    isCompleted : false,\n    finalResult : \"\"\n  }\n\n  onCompleteComponent = async (result) => {\n    var hotelLocation=\"\";\n    try {\n      console.log(this.props.hotelLocation);\n      if (this.props.hotelLocation === \"\"){\n        hotelLocation = result.data.HotelLocation;\n        await API.graphql(graphqlOperation(createFirstLogin, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub,'LocationHotel':result.data.HotelLocation}}));\n      } else {\n        hotelLocation = this.props.hotelLocation;\n      }\n\n      const trakings = await API.graphql(graphqlOperation(listTrackings,  {\n          filter: {\n              and : [{\n              Sub: {\n                  eq: this.props.userAttributes.sub\n              },\n              Week:{\n                eq : 'W1'\n              }\n            }]\n          }\n        }));\n\n      if (trakings.data.listTrackings.items.length === 0) {\n       console.log(result.data);\n       console.log(this.props.hotelLocation);\n\n        var Week = 'W1'\n\n        //Page1 \n        var HotelLocation = hotelLocation;\n        var IsHotelClosed = result.data.IsHotelClosed;\n        var HotelReopeningDate = result.data.HotelReopeningDate;\n        var IsHotelContainmentZone = result.data.isHotelContainmentZone;\n        var HotelContainmentEndDate = result.data.HotelContainmentEndDate;\n\n        //Page 2\n\n        var NbBookings = NbBookings;\n        var NbRoomNightsBooked = NbRoomNightsBooked;\n        var NbRoomNightsCanceled = NbRoomNightsCanceled;\n        var SplitTotalRoomsBusinessSegment = result.data['SplitTotalRoomsBusinessSegment'];\n\n        var  NbRoomNightsBookedFIT = 0;\n        var  NbRoomNightsBookedMICE = 0;\n        var  NbRoomNightsBookedCorporate = 0;\n        var  RemainingRoomNightsBySegment = 0;\n        if (SplitTotalRoomsBusinessSegment) {\n          NbRoomNightsBookedFIT = SplitTotalRoomsBusinessSegment['FIT']? SplitTotalRoomsBusinessSegment['FIT'].NbRoomsNightsBS : 0;\n          NbRoomNightsBookedMICE = SplitTotalRoomsBusinessSegment['MICE']?SplitTotalRoomsBusinessSegment['MICE'].NbRoomsNightsBS: 0;\n          NbRoomNightsBookedCorporate = SplitTotalRoomsBusinessSegment['Corporate']?SplitTotalRoomsBusinessSegment['Corporate'].NbRoomsNightsBS : 0;\n        }\n    \n        RemainingRoomNightsBySegment = result.data['SplitTotalRoomsBusinessSegment-total'].NbRoomsNightsBS;\n     \n        //TODO ADD Business Validation\n        var RoomsNightsSplit = result.data['RoomsNightsSplit'];\n        var RoomNightsCountry1 = null;\n        var NbRoomNightsBookedCountry1 = 0;\n        var RoomNightsCountry2 = null;\n        var NbRoomNightsBookedCountry2 = 0;\n        var RoomNightsCountry3 = null;\n        var NbRoomNightsBookedCountry3 = 0;\n        var RoomNightsCountry4 = null;\n        var NbRoomNightsBookedCountry4 = 0;\n        var RoomNightsCountry5 = null;\n        var NbRoomNightsBookedCountry5 = 0;\n        if (RoomsNightsSplit) {\n            RoomNightsCountry1 = RoomsNightsSplit['Country1']?RoomsNightsSplit['Country1'].Country:\"\";\n            NbRoomNightsBookedCountry1 = RoomsNightsSplit['Country1']?RoomsNightsSplit['Country1'].NbRoomNights:0;\n            RoomNightsCountry2 = RoomsNightsSplit['Country2']?RoomsNightsSplit['Country2'].Country:\"\";\n            NbRoomNightsBookedCountry2 = RoomsNightsSplit['Country2']?RoomsNightsSplit['Country2'].NbRoomNights:0;\n            RoomNightsCountry3 = RoomsNightsSplit['Country3']?RoomsNightsSplit['Country3'].Country:\"\";\n            NbRoomNightsBookedCountry3 = RoomsNightsSplit['Country3']?RoomsNightsSplit['Country3'].NbRoomNights:0;\n            RoomNightsCountry4 = RoomsNightsSplit['Country4']?RoomsNightsSplit['Country4'].Country:\"\";\n            NbRoomNightsBookedCountry4 = RoomsNightsSplit['Country4']?RoomsNightsSplit['Country4'].NbRoomNights:0;\n            RoomNightsCountry5 = RoomsNightsSplit['Country5']?RoomsNightsSplit['Country5'].Country:\"\";\n            NbRoomNightsBookedCountry5 = RoomsNightsSplit['Country5']?RoomsNightsSplit['Country5'].NbRoomNights:0;\n        }\n        console.log(RoomNightsCountry1);\n        console.log(NbRoomNightsBookedCountry1);\n        console.log(RoomNightsCountry2);\n        console.log(NbRoomNightsBookedCountry2);\n        \n        var SplitByMonth = result.data['SplitByMonth'];\n        var  NbRoomNightsBookedLastWeekApril = 0;\n        var  NbRoomNightsBookedLastWeekMay = 0;\n        var  NbRoomNightsBookedLastWeekJune = 0;\n        var  NbRoomNightsBookedLastWeekJuly = 0;\n        var  NbRoomNightsBookedLastWeekAugust = 0;\n        var  NbRoomNightsBookedLastWeekSeptember =0;\n        var  TotalNightsBookedLastWeek = 0;\n\n        if (SplitByMonth) {\n          NbRoomNightsBookedLastWeekApril = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M1:0;\n          NbRoomNightsBookedLastWeekMay = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M2:0;\n          NbRoomNightsBookedLastWeekJune = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M3:0;\n          NbRoomNightsBookedLastWeekJuly = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M4:0;\n          NbRoomNightsBookedLastWeekAugust = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M5:0;\n          NbRoomNightsBookedLastWeekSeptember = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M6:0;\n          TotalNightsBookedLastWeek = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M7:0;\n        }\n        console.log(NbRoomNightsBookedLastWeekApril);\n        console.log(NbRoomNightsBookedLastWeekMay);\n\n      \n        //Page 3\n        \n        var TotalNumberRoomAvailable = result.data.TotalNumberRoomAvailable;\n\n        var SplitTotalRoomAvailable = result.data['SplitTotalRoomAvailable'];\n        var  NbOccupiedRoomNightsAvril= null;\n          var  NbOccupiedRoomNightsMay=  null;\n          var  NbOccupiedRoomNightsJune=  null;\n          var  NbOccupiedRoomNightsJuly=  null;\n          var  NbOccupiedRoomNightsAugust=  null;\n          var  NbOccupiedRoomNightsSeptember=  null;\n          var  NbTotalRoomNightsAvril=  null;\n          var  NbTotalRoomNightsMay=  null;\n          var  NbTotalRoomNightsJune=  null;\n          var  NbTotalRoomNightsJuly=  null;\n          var  NbTotalRoomNightsAugust=  null;\n          var  NbTotalRoomNightsSeptember=  null;\n  \n        if (SplitTotalRoomAvailable) {\n          NbOccupiedRoomNightsAvril= SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1:0:0;\n          NbOccupiedRoomNightsMay=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2:0:0;\n          NbOccupiedRoomNightsJune=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3:0:0;\n          NbOccupiedRoomNightsJuly=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4:0:0;\n          NbOccupiedRoomNightsAugust=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5:0:0;\n          NbOccupiedRoomNightsSeptember=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6:0:0;\n          NbTotalRoomNightsAvril=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1:0:0;\n          NbTotalRoomNightsMay=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2:0:0;\n          NbTotalRoomNightsJune=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3:0:0;\n          NbTotalRoomNightsJuly=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4:0:0;\n          NbTotalRoomNightsAugust=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5:0:0;\n          NbTotalRoomNightsSeptember=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6:0:0;\n        }\n\n        var SplitTotalRoomAvailable = result.data['SplitTotalRoomAvailable-total'];\n        var OccupancyRateApril = null;\n        var OccupancyRateMay = null;\n        var OccupancyRateJune = null;\n        var OccupancyRateJuly = null;\n        var OccupancyRateAugust = null;\n        var OccupancyRateSeptember = null;\n\n        if (SplitTotalRoomAvailable) {\n\n          OccupancyRateApril = SplitTotalRoomAvailable.M1?SplitTotalRoomAvailable.M1:null;\n          OccupancyRateMay = SplitTotalRoomAvailable.M2?SplitTotalRoomAvailable.M2:null;\n          OccupancyRateJune = SplitTotalRoomAvailable.M3?SplitTotalRoomAvailable.M3:null;\n          OccupancyRateJuly = SplitTotalRoomAvailable.M4?SplitTotalRoomAvailable.M4:null;\n          OccupancyRateAugust =SplitTotalRoomAvailable.M5?SplitTotalRoomAvailable.M5:null;\n          OccupancyRateSeptember =SplitTotalRoomAvailable.M6?SplitTotalRoomAvailable.M6:null;\n\n        }\n\n        //\n      var Result = result.data;\n        \n\n        //await API.graphql(graphqlOperation(createTracking, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub, Week }}));\n        await API.graphql(graphqlOperation(createSurvey, {input:{ IsHotelClosed, IsHotelContainmentZone, HotelContainmentEndDate, HotelReopeningDate, \n          NbBookings, NbRoomNightsBooked, NbRoomNightsCanceled,\n          NbRoomNightsBookedFIT, NbRoomNightsBookedMICE, NbRoomNightsBookedCorporate, RemainingRoomNightsBySegment,\n          RoomNightsCountry1, NbRoomNightsBookedCountry1, RoomNightsCountry2, NbRoomNightsBookedCountry2, RoomNightsCountry3, NbRoomNightsBookedCountry3,\n          RoomNightsCountry4, NbRoomNightsBookedCountry4, RoomNightsCountry5, NbRoomNightsBookedCountry5, NbRoomNightsBookedLastWeekApril, NbRoomNightsBookedLastWeekMay,\n          NbRoomNightsBookedLastWeekAugust, NbRoomNightsBookedLastWeekSeptember, TotalNightsBookedLastWeek, NbRoomNightsBookedLastWeekJune, NbRoomNightsBookedLastWeekJuly,\n          TotalNumberRoomAvailable, NbOccupiedRoomNightsAvril,NbOccupiedRoomNightsAugust, NbOccupiedRoomNightsJuly, NbOccupiedRoomNightsJune, NbOccupiedRoomNightsMay,\n          NbOccupiedRoomNightsSeptember,NbTotalRoomNightsAugust, NbTotalRoomNightsAvril, NbTotalRoomNightsJuly, NbTotalRoomNightsJune, NbTotalRoomNightsMay, NbTotalRoomNightsSeptember, \n         OccupancyRateApril, OccupancyRateAugust, OccupancyRateJuly, OccupancyRateJune, OccupancyRateMay, OccupancyRateSeptember, Week, Result, HotelLocation\n        } }));\n        \n        this.setState({ isCompleted: true});\n        history.push('/Final');\n      } else {\n        history.push('/FinalRetry');\n      }\n\n\n     \n    } catch (err) {\n      console.error(\"error during delete\", err);\n    }\n  }\n\n  render() {\n\n\n   \n    var json = (this.props.hotelLocation === \"\")? firstSurvey : finalSurvey;\n    \n\n    var surveyRender = !this.state.isCompleted ? (\n      <Survey.Survey\n        json={json}\n        //data={data}\n        showCompletedPage={false}\n        onComplete={this.onCompleteComponent}\n      />\n    ) : null;\n\n    \n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return (\n      <div>\n        {surveyRender}\n      </div>\n    );\n  }\n}\n\nexport default SurveyComponent;"]},"metadata":{},"sourceType":"module"}