{"ast":null,"code":"var _jsxFileName = \"/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js\";\nimport React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking } from \"../graphql/mutations\";\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nimport firstSurvey from '../survey/FirstServey';\nimport finalSurvey from '../survey/FinalSurvey';\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isCompleted: false,\n      finalResult: \"\"\n    };\n\n    this.onCompleteComponent = async result => {\n      try {\n        const hotelName = this.props.userAttributes['custom:HotelName']; //await API.graphql(graphqlOperation(createSurvey, {input:result.data} ));\n        //await API.graphql(graphqlOperation(createTracking, {input:{'HotelName':hotelName}}));\n\n        console.log(this.props.userAttributes['custom:HotelName']);\n        console.log(result.data);\n        this.setState({\n          isCompleted: true\n        });\n        history.push('/Final');\n      } catch (err) {\n        console.error(\"error during delete\", err);\n      }\n    };\n  }\n\n  render() {\n    var json = this.props.HotelLocation === \"\" ? firstSurvey : finalSurvey;\n    var surveyRender = !this.state.isCompleted ? /*#__PURE__*/React.createElement(Survey.Survey, {\n      json: json //data={data}\n      ,\n      showCompletedPage: false,\n      onComplete: this.onCompleteComponent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 7\n      }\n    }) : null;\n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, surveyRender);\n  }\n\n}\n\nexport default SurveyComponent;","map":{"version":3,"sources":["/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js"],"names":["React","Component","Survey","createSurvey","createTracking","graphqlOperation","API","history","firstSurvey","finalSurvey","StylesManager","applyTheme","SurveyComponent","state","isCompleted","finalResult","onCompleteComponent","result","hotelName","props","userAttributes","console","log","data","setState","push","err","error","render","json","HotelLocation","surveyRender"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,MAAZ,MAAwB,cAAxB;AACA,OAAO,yBAAP;AACA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,sBAA7C;AACA,SAASC,gBAAT,EAA2BC,GAA3B,QAAsC,aAAtC;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AAEAP,MAAM,CAACQ,aAAP,CAAqBC,UAArB,CAAgC,QAAhC;;AAEA,MAAMC,eAAN,SAA8BX,SAA9B,CAAwC;AAAA;AAAA;AAAA,SAEtCY,KAFsC,GAE9B;AACNC,MAAAA,WAAW,EAAG,KADR;AAENC,MAAAA,WAAW,EAAG;AAFR,KAF8B;;AAAA,SAOtCC,mBAPsC,GAOhB,MAAOC,MAAP,IAAkB;AACtC,UAAI;AACF,cAAMC,SAAS,GAAG,KAAKC,KAAL,CAAWC,cAAX,CAA0B,kBAA1B,CAAlB,CADE,CAEF;AACA;;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKH,KAAL,CAAWC,cAAX,CAA0B,kBAA1B,CAAZ;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYL,MAAM,CAACM,IAAnB;AACA,aAAKC,QAAL,CAAc;AAAEV,UAAAA,WAAW,EAAE;AAAf,SAAd;AACAP,QAAAA,OAAO,CAACkB,IAAR,CAAa,QAAb;AACD,OARD,CAQE,OAAOC,GAAP,EAAY;AACZL,QAAAA,OAAO,CAACM,KAAR,CAAc,qBAAd,EAAqCD,GAArC;AACD;AACF,KAnBqC;AAAA;;AAqBtCE,EAAAA,MAAM,GAAG;AAIP,QAAIC,IAAI,GAAI,KAAKV,KAAL,CAAWW,aAAX,KAA6B,EAA9B,GAAmCtB,WAAnC,GAAiDC,WAA5D;AAGA,QAAIsB,YAAY,GAAG,CAAC,KAAKlB,KAAL,CAAWC,WAAZ,gBACjB,oBAAC,MAAD,CAAQ,MAAR;AACE,MAAA,IAAI,EAAEe,IADR,CAEE;AAFF;AAGE,MAAA,iBAAiB,EAAE,KAHrB;AAIE,MAAA,UAAU,EAAE,KAAKb,mBAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADiB,GAOf,IAPJ;AAUA;;;AAGA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGe,YADH,CADF;AAKD;;AA9CqC;;AAiDxC,eAAenB,eAAf","sourcesContent":["import React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking } from \"../graphql/mutations\";\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nimport firstSurvey from '../survey/FirstServey';\nimport finalSurvey from '../survey/FinalSurvey';\n\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n\n  state = {\n    isCompleted : false,\n    finalResult : \"\"\n  }\n\n  onCompleteComponent = async (result) => {\n    try {\n      const hotelName = this.props.userAttributes['custom:HotelName'];\n      //await API.graphql(graphqlOperation(createSurvey, {input:result.data} ));\n      //await API.graphql(graphqlOperation(createTracking, {input:{'HotelName':hotelName}}));\n      console.log(this.props.userAttributes['custom:HotelName']);\n      console.log(result.data);\n      this.setState({ isCompleted: true});\n      history.push('/Final');\n    } catch (err) {\n      console.error(\"error during delete\", err);\n    }\n  }\n\n  render() {\n\n\n   \n    var json = (this.props.HotelLocation === \"\")? firstSurvey : finalSurvey;\n    \n\n    var surveyRender = !this.state.isCompleted ? (\n      <Survey.Survey\n        json={json}\n        //data={data}\n        showCompletedPage={false}\n        onComplete={this.onCompleteComponent}\n      />\n    ) : null;\n\n    \n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return (\n      <div>\n        {surveyRender}\n      </div>\n    );\n  }\n}\n\nexport default SurveyComponent;"]},"metadata":{},"sourceType":"module"}