{"ast":null,"code":"import _regeneratorRuntime from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import*as Survey from\"survey-react\";import\"survey-react/survey.css\";import{createSurvey}from\"../graphql/mutations\";import{graphqlOperation,API}from\"aws-amplify\";import Button from\"@material-ui/core/Button\";Survey.StylesManager.applyTheme(\"orange\");var SurveyComponent=/*#__PURE__*/function(_Component){_inherits(SurveyComponent,_Component);var _super=_createSuper(SurveyComponent);function SurveyComponent(){var _this;_classCallCheck(this,SurveyComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isCompleted:false,finalResult:\"\"};_this.onCompleteComponent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.graphql(graphqlOperation(createSurvey,{input:result.data}));case 3:_this.setState({isCompleted:true});_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(\"error during delete\",_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SurveyComponent,[{key:\"render\",value:function render(){/*let data = {\n      HotelClosed: true,\n      HotelReopenDate: \"2021-02-02\",\n      ConfinementZone: true,\n      ConfinementEnd: \"2022-02-02\",\n      NbBookings: 7,\n      NbCancelation: 8,\n      ClientLocation: {\n        'Pays #1': {\n          Nom: 'Paris',\n          Nombre: '7'\n        },\n        'Pays #2': {\n          Nom: 'Londres',\n          Nombre: '8'\n        },\n        'Pays #3': {\n          Nom: 'Maroc',\n          Nombre: '9'\n        },\n        Autres: {\n          Nom: 'New-York',\n          Nombre: '10'\n        }\n      },\n      BusinessSegment: {\n        FIT: \"8\",\n        MICE: \"9\",\n        Corporate: \"10\"\n      }\n    };*/var json={title:\"Covid-19 Survey\",showProgressBar:\"top\",pages:[{name:\"Fermeture de l'hôtel\",elements:[{type:\"boolean\",name:\"HotelClosed\",title:\"L'hôtel est-il totalement fermé ?\",isRequired:true,labelTrue:\"Yes\",labelFalse:\"No\"},{type:\"text\",name:\"HotelReopenDate\",visibleIf:\"{HotelClosed} = true\",title:\"Si oui, date de réouverture prévue\",inputType:\"date\"}],title:\"Fermeture de l'hôtel\"},{name:\"Confinement\",elements:[{type:\"boolean\",name:\"ConfinementZone\",title:\"Votre zone géographique fait-elle l'objet d'un confinement ?\",isRequired:true,labelTrue:\"Yes\",labelFalse:\"No\"},{type:\"text\",name:\"ConfinementEnd\",visibleIf:\"{ConfinementZone} = true\",title:\"Si oui, date de levée des confinements prévue\",inputType:\"date\"}],title:\"Confinement\"},{name:\"Nb de réservations au cours des 7 derniers jours\",elements:[{type:\"text\",name:\"NbBookings\",title:\"Nb de réservations au cours des 7 derniers jours\",inputType:\"number\"},{type:\"text\",name:\"NbCancelation\",title:\"Nb d'annulations au cours des 7 derniers jours\",inputType:\"number\"}],title:\"Nb de réservations au cours des 7 derniers jours\"},{name:\"Nationalité des clients ayant réservé au cours des 7 derniers jours ?\",elements:[{type:\"matrixdropdown\",name:\"ClientLocation\",title:\"Nationalité des clients ayant réservé au cours des 7 derniers jours ?\",columns:[{name:\"Nom\",cellType:\"dropdown\"},{name:\"Nombre\",cellType:\"text\"}],choices:[{value:\"Paris\",text:\"Paris\"},{value:\"Londres\",text:\"Londres\"},{value:\"Maroc\",text:\"Maroc\"},{value:\"Suisse\",text:\"Suisse\"},{value:\"New-York\",text:\"New-York\"}],rows:[\"Pays #1\",\"Pays #2\",\"Pays #3\",\"Autres\"]}],title:\"Nationalité des clients ayant réservé au cours des 7 derniers jours ?\"},{name:\"Quel business segment a réservé au cours des 7 de\",elements:[{type:\"multipletext\",name:\"BusinessSegment\",title:\"Quel business segment a réservé au cours des 7 derniers jours\",items:[{name:\"FIT\",title:\"FIT\"},{name:\"MICE\",title:\"MICE\"},{name:\"Corporate\",title:\"Corporate\"}]}],title:\"Quel business segment a réservé au cours des 7 de\"}]};var surveyRender=!this.state.isCompleted?/*#__PURE__*/React.createElement(Survey.Survey,{json:json/*data={data}*/,showCompletedPage:false,onComplete:this.onCompleteComponent}):null;function refreshPage(){window.location.reload();}var onCompleteComponent=this.state.isCompleted?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:refreshPage},\"Nouveau Sondage\"),\" \"):null;return/*#__PURE__*/React.createElement(\"div\",null,surveyRender,onCompleteComponent);}}]);return SurveyComponent;}(Component);export default SurveyComponent;","map":{"version":3,"sources":["/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js"],"names":["React","Component","Survey","createSurvey","graphqlOperation","API","Button","StylesManager","applyTheme","SurveyComponent","state","isCompleted","finalResult","onCompleteComponent","result","graphql","input","data","setState","console","error","json","title","showProgressBar","pages","name","elements","type","isRequired","labelTrue","labelFalse","visibleIf","inputType","columns","cellType","choices","value","text","rows","items","surveyRender","refreshPage","window","location","reload"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey} from \"../graphql/mutations\";\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport Button from \"@material-ui/core/Button\";\n\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n\n  state = {\n    isCompleted : false,\n    finalResult : \"\"\n  }\n\n  onCompleteComponent = async (result) => {\n    try {\n      await API.graphql(graphqlOperation(createSurvey, {input:result.data} ));\n      this.setState({ isCompleted: true});\n    } catch (err) {\n      console.error(\"error during delete\", err);\n    }\n  }\n\n  render() {\n\n    /*let data = {\n      HotelClosed: true,\n      HotelReopenDate: \"2021-02-02\",\n      ConfinementZone: true,\n      ConfinementEnd: \"2022-02-02\",\n      NbBookings: 7,\n      NbCancelation: 8,\n      ClientLocation: {\n        'Pays #1': {\n          Nom: 'Paris',\n          Nombre: '7'\n        },\n        'Pays #2': {\n          Nom: 'Londres',\n          Nombre: '8'\n        },\n        'Pays #3': {\n          Nom: 'Maroc',\n          Nombre: '9'\n        },\n        Autres: {\n          Nom: 'New-York',\n          Nombre: '10'\n        }\n      },\n      BusinessSegment: {\n        FIT: \"8\",\n        MICE: \"9\",\n        Corporate: \"10\"\n      }\n    };*/\n\n    let json = {\n      title: \"Covid-19 Survey\",\n      showProgressBar: \"top\",\n      pages: [\n        {\n          name: \"Fermeture de l'hôtel\",\n          elements: [\n            {\n              type: \"boolean\",\n              name: \"HotelClosed\",\n              title: \"L'hôtel est-il totalement fermé ?\",\n              isRequired: true,\n              labelTrue: \"Yes\",\n              labelFalse: \"No\"\n            },\n            {\n              type: \"text\",\n              name: \"HotelReopenDate\",\n              visibleIf: \"{HotelClosed} = true\",\n              title: \"Si oui, date de réouverture prévue\",\n              inputType: \"date\"\n            }\n          ],\n          title: \"Fermeture de l'hôtel\"\n        },\n        {\n          name: \"Confinement\",\n          elements: [\n            {\n              type: \"boolean\",\n              name: \"ConfinementZone\",\n              title:\n                \"Votre zone géographique fait-elle l'objet d'un confinement ?\",\n              isRequired: true,\n              labelTrue: \"Yes\",\n              labelFalse: \"No\"\n            },\n            {\n              type: \"text\",\n              name: \"ConfinementEnd\",\n              visibleIf: \"{ConfinementZone} = true\",\n              title: \"Si oui, date de levée des confinements prévue\",\n              inputType: \"date\"\n            }\n          ],\n          title: \"Confinement\"\n        },\n        {\n          name: \"Nb de réservations au cours des 7 derniers jours\",\n          elements: [\n            {\n              type: \"text\",\n              name: \"NbBookings\",\n              title: \"Nb de réservations au cours des 7 derniers jours\",\n              inputType: \"number\"\n            },\n            {\n              type: \"text\",\n              name: \"NbCancelation\",\n              title: \"Nb d'annulations au cours des 7 derniers jours\",\n              inputType: \"number\"\n            }\n          ],\n          title: \"Nb de réservations au cours des 7 derniers jours\"\n        },\n        {\n          name:\n            \"Nationalité des clients ayant réservé au cours des 7 derniers jours ?\",\n          elements: [\n            {\n              type: \"matrixdropdown\",\n              name: \"ClientLocation\",\n              title:\n                \"Nationalité des clients ayant réservé au cours des 7 derniers jours ?\",\n              columns: [\n                {\n                  name: \"Nom\",\n                  cellType: \"dropdown\"\n                },\n                {\n                  name: \"Nombre\",\n                  cellType: \"text\"\n                }\n              ],\n              choices: [\n                {\n                  value: \"Paris\",\n                  text: \"Paris\"\n                },\n                {\n                  value: \"Londres\",\n                  text: \"Londres\"\n                },\n                {\n                  value: \"Maroc\",\n                  text: \"Maroc\"\n                },\n                {\n                  value: \"Suisse\",\n                  text: \"Suisse\"\n                },\n                {\n                  value: \"New-York\",\n                  text: \"New-York\"\n                }\n              ],\n              rows: [\"Pays #1\", \"Pays #2\", \"Pays #3\", \"Autres\"]\n            }\n          ],\n          title:\n            \"Nationalité des clients ayant réservé au cours des 7 derniers jours ?\"\n        },\n        {\n          name: \"Quel business segment a réservé au cours des 7 de\",\n          elements: [\n            {\n              type: \"multipletext\",\n              name: \"BusinessSegment\",\n              title:\n                \"Quel business segment a réservé au cours des 7 derniers jours\",\n              items: [\n                {\n                  name: \"FIT\",\n                  title: \"FIT\"\n                },\n                {\n                  name: \"MICE\",\n                  title: \"MICE\"\n                },\n                {\n                  name: \"Corporate\",\n                  title: \"Corporate\"\n                }\n              ]\n            }\n          ],\n          title: \"Quel business segment a réservé au cours des 7 de\"\n        }\n      ]\n    };\n    var surveyRender = !this.state.isCompleted ? (\n      <Survey.Survey\n        json={json}\n        /*data={data}*/\n        showCompletedPage={false}\n        onComplete={this.onCompleteComponent}\n      />\n    ) : null;\n\n    function refreshPage() {\n      window.location.reload();\n    }\n    \n    var onCompleteComponent = this.state.isCompleted ? (\n      <div>\n      <Button  variant=\"contained\" color=\"primary\" onClick={ refreshPage }>Nouveau Sondage</Button> </div>\n    ) : null;\n\n    return (\n      <div>\n        {surveyRender}\n        {onCompleteComponent}\n      </div>\n    );\n  }\n}\n\nexport default SurveyComponent;"]},"metadata":{},"sourceType":"module"}