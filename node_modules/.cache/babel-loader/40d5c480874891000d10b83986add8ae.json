{"ast":null,"code":"var _jsxFileName = \"/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js\";\nimport React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking } from \"../graphql/mutations\";\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isCompleted: false,\n      finalResult: \"\"\n    };\n\n    this.onCompleteComponent = async result => {\n      try {\n        const hotelName = this.props.userAttributes['custom:HotelName'];\n        await API.graphql(graphqlOperation(createSurvey, {\n          input: result.data\n        }));\n        await API.graphql(graphqlOperation(createTracking, {\n          input: {\n            'HotelName': hotelName\n          }\n        }));\n        console.log(this.props.userAttributes['custom:HotelName']);\n        console.log(result.data);\n        this.setState({\n          isCompleted: true\n        });\n        history.push('/Final');\n      } catch (err) {\n        console.error(\"error during delete\", err);\n      }\n    };\n  }\n\n  render() {\n    /*let data = {\n      HotelClosed: true,\n      HotelReopenDate: \"2021-02-02\",\n      ConfinementZone: true,\n      ConfinementEnd: \"2022-02-02\",\n      NbBookings: 7,\n      NbCancelation: 8,\n      ClientLocation: {\n        'Pays #1': {\n          Nom: 'Paris',\n          Nombre: '7'\n        },\n        'Pays #2': {\n          Nom: 'Londres',\n          Nombre: '8'\n        },\n        'Pays #3': {\n          Nom: 'Maroc',\n          Nombre: '9'\n        },\n        Autres: {\n          Nom: 'New-York',\n          Nombre: '10'\n        }\n      },\n      BusinessSegment: {\n        FIT: \"8\",\n        MICE: \"9\",\n        Corporate: \"10\"\n      }\n    };*/\n    let json = {\n      \"pages\": [{\n        \"name\": \"GENERAL INFORMATION\",\n        \"elements\": [{\n          \"type\": \"panel\",\n          \"name\": \"Hotel Closure\",\n          \"elements\": [{\n            \"type\": \"boolean\",\n            \"name\": \"IsHotelClosed\",\n            \"title\": \"Is your hotel closed ?\",\n            \"isRequired\": true,\n            \"labelTrue\": \"Yes\",\n            \"labelFalse\": \"No\"\n          }, {\n            \"type\": \"text\",\n            \"name\": \"HotelReopeningDate\",\n            \"visibleIf\": \"{IsHotelClosed} = true\",\n            \"width\": \"25\",\n            \"title\": \"If yes, expected reopening date ?\",\n            \"isRequired\": true,\n            \"inputType\": \"date\",\n            \"max\": \"2999-12-31\"\n          }],\n          \"title\": \"Hotel Closure\"\n        }, {\n          \"type\": \"panel\",\n          \"name\": \"Local containment\",\n          \"elements\": [{\n            \"type\": \"boolean\",\n            \"name\": \"isHotelContainmentZone\",\n            \"title\": \"Is your hotel located in a containment zone ?\",\n            \"isRequired\": true,\n            \"labelTrue\": \"Yes\",\n            \"labelFalse\": \"No\"\n          }, {\n            \"type\": \"text\",\n            \"name\": \"HotelContainmentEndDate\",\n            \"visibleIf\": \"{isHotelContainmentZone} = true\",\n            \"width\": \"25\",\n            \"title\": \"If yes, official end of containment date ? (expected date)\",\n            \"isRequired\": true,\n            \"inputType\": \"date\",\n            \"max\": \"2999-12-31\"\n          }],\n          \"title\": \"Local containment\"\n        }],\n        \"title\": \"GENERAL INFORMATION\"\n      }, {\n        \"name\": \"LAST WEEK ACTIVITY\",\n        \"elements\": [{\n          \"type\": \"panel\",\n          \"name\": \"LastWeekActivity\",\n          \"elements\": [{\n            \"type\": \"text\",\n            \"name\": \"NbBookings\",\n            \"width\": \"10\",\n            \"title\": \"Total number of bookings\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n          }, {\n            \"type\": \"text\",\n            \"name\": \"NbRoomNightsBooked\",\n            \"width\": \"10\",\n            \"title\": \"Total number of room nights booked\",\n            \"isRequired\": true,\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n          }, {\n            \"type\": \"text\",\n            \"name\": \"NbRoomNightsCanceled\",\n            \"width\": \"10\",\n            \"title\": \"Total number of room nights cancelled\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n          }],\n          \"title\": \"Last Week Activity - General Information\"\n        }, {\n          \"type\": \"panel\",\n          \"name\": \"panel1\",\n          \"elements\": [{\n            \"type\": \"matrixdropdown\",\n            \"name\": \"RoomsNightsSplit\",\n            \"width\": \"300\",\n            \"title\": \"Split of total room nights booked by client country of origin (countries 1 to 5 in number of nights descending order)\",\n            \"columns\": [{\n              \"name\": \"Country\",\n              \"title\": \"Country\",\n              \"cellType\": \"dropdown\",\n              \"width\": \"20\",\n              \"choicesByUrl\": {\n                \"url\": \"https://restcountries.eu/rest/v2/all\",\n                \"valueName\": \"name\"\n              }\n            }, {\n              \"name\": \"NbRoomNights\",\n              \"title\": \"NB of room nights\",\n              \"cellType\": \"text\",\n              \"width\": \"10\",\n              \"totalExpression\": \"{NbRoomNightsBooked}-{RoomsNightsSplit.Country1.NbRoomNights}-{RoomsNightsSplit.Country2.NbRoomNights}-{RoomsNightsSplit.Country3.NbRoomNights}-{RoomsNightsSplit.Country4.NbRoomNights}-{RoomsNightsSplit.Country5.NbRoomNights}\",\n              \"totalDisplayStyle\": \"decimal\",\n              \"inputType\": \"number\"\n            }],\n            \"rows\": [{\n              \"value\": \"Country1\",\n              \"text\": \"Country of Origin #1 (largest)\"\n            }, {\n              \"value\": \"Country2\",\n              \"text\": \"Country of Origin #2 \"\n            }, {\n              \"value\": \"Country3\",\n              \"text\": \"Country of Origin #3\"\n            }, {\n              \"value\": \"Country4\",\n              \"text\": \"Country of Origin #4\"\n            }, {\n              \"value\": \"Country5\",\n              \"text\": \"Country of Origin #5\"\n            }],\n            \"totalText\": \"Other Countries\"\n          }]\n        }, {\n          \"type\": \"panel\",\n          \"name\": \"panel2\",\n          \"elements\": [{\n            \"type\": \"text\",\n            \"name\": \"FIT\",\n            \"width\": \"10\",\n            \"title\": \"FIT\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n          }, {\n            \"type\": \"text\",\n            \"name\": \"MICE\",\n            \"width\": \"10\",\n            \"title\": \"MICE\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n          }, {\n            \"type\": \"text\",\n            \"name\": \"Corporate\",\n            \"width\": \"10\",\n            \"title\": \"Corporate\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n          }],\n          \"title\": \"Split of total room nights booked by business segment\"\n        }, {\n          \"type\": \"panel\",\n          \"name\": \"panel3\",\n          \"elements\": [{\n            \"type\": \"matrixdropdown\",\n            \"name\": \"SplitByMonth\",\n            \"title\": \"Split of total room nights booked by stay month\",\n            \"columns\": [{\n              \"name\": \"M1\",\n              \"title\": \"Stay in April 2020\",\n              \"width\": \"10\"\n            }, {\n              \"name\": \"M2\",\n              \"title\": \"Stay in May 2020\",\n              \"width\": \"10\"\n            }, {\n              \"name\": \"M3\",\n              \"title\": \"Stay in June 2020\",\n              \"width\": \"10\"\n            }, {\n              \"name\": \"M4\",\n              \"title\": \"Stay in July 2020\",\n              \"width\": \"10\"\n            }, {\n              \"name\": \"M5\",\n              \"title\": \"Stay in August 2020\",\n              \"width\": \"10\"\n            }, {\n              \"name\": \"M6\",\n              \"title\": \"Stay in September 2020\",\n              \"width\": \"10\"\n            }, {\n              \"name\": \"M7\",\n              \"title\": \"Stay from October 2020 or later\",\n              \"cellType\": \"expression\",\n              \"width\": \"10\",\n              \"expression\": \"{NbRoomNightsBooked}-{row.M1}+{row.M2}+{row.M3}-{row.M4}+{row.M5}+{row.M6}\"\n            }],\n            \"choices\": [1, 2, 3, 4, 5],\n            \"cellType\": \"text\",\n            \"rows\": [{\n              \"value\": \"NbRoomsByMonth\",\n              \"text\": \"Number of room nights booked last week\"\n            }]\n          }]\n        }],\n        \"title\": \"LAST WEEK ACTIVITY (from Monday to Sunday)\"\n      }, {\n        \"name\": \"ON THE BOOK\",\n        \"elements\": [{\n          \"type\": \"text\",\n          \"name\": \"TotalNumberRoomNightsAvailable\",\n          \"width\": \"10\",\n          \"title\": \"Total number of rooms nights available for sale (on a monthly basis)\",\n          \"titleLocation\": \"left\",\n          \"inputType\": \"number\",\n          \"size\": 10\n        }, {\n          \"type\": \"matrixdropdown\",\n          \"name\": \"SplitTotalRoomAvailable\",\n          \"title\": \"Split of total room nights available for sale by month\",\n          \"columns\": [{\n            \"name\": \"M1\",\n            \"title\": \"April 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M1}\"\n          }, {\n            \"name\": \"M2\",\n            \"title\": \"May 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M2}\"\n          }, {\n            \"name\": \"M3\",\n            \"title\": \"June 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M3}\"\n          }, {\n            \"name\": \"M4\",\n            \"title\": \"July 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M4}\"\n          }, {\n            \"name\": \"M5\",\n            \"title\": \"August 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M5}\"\n          }, {\n            \"name\": \"M6\",\n            \"title\": \"September 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M6}\"\n          }],\n          \"choices\": [1, 2, 3, 4, 5],\n          \"cellType\": \"text\",\n          \"rows\": [{\n            \"value\": \"NbOfOccupiedRooms\",\n            \"text\": \"Number of occupied rooms\"\n          }],\n          \"totalText\": \"Total number of rooms nights available for sale\"\n        }, {\n          \"type\": \"panel\",\n          \"name\": \"panel4\"\n        }],\n        \"title\": \"ON THE BOOK (stay month)\"\n      }]\n    };\n    var surveyRender = !this.state.isCompleted ? /*#__PURE__*/React.createElement(Survey.Survey, {\n      json: json\n      /*data={data}*/\n      ,\n      showCompletedPage: false,\n      onComplete: this.onCompleteComponent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 7\n      }\n    }) : null;\n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 7\n      }\n    }, surveyRender);\n  }\n\n}\n\nexport default SurveyComponent;","map":{"version":3,"sources":["/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js"],"names":["React","Component","Survey","createSurvey","createTracking","graphqlOperation","API","history","StylesManager","applyTheme","SurveyComponent","state","isCompleted","finalResult","onCompleteComponent","result","hotelName","props","userAttributes","graphql","input","data","console","log","setState","push","err","error","render","json","surveyRender"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking } from \"../graphql/mutations\";\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\n\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n\n  state = {\n    isCompleted : false,\n    finalResult : \"\"\n  }\n\n  onCompleteComponent = async (result) => {\n    try {\n      const hotelName = this.props.userAttributes['custom:HotelName'];\n      await API.graphql(graphqlOperation(createSurvey, {input:result.data} ));\n      await API.graphql(graphqlOperation(createTracking, {input:{'HotelName':hotelName}}));\n      console.log(this.props.userAttributes['custom:HotelName']);\n      console.log(result.data);\n      this.setState({ isCompleted: true});\n      history.push('/Final');\n    } catch (err) {\n      console.error(\"error during delete\", err);\n    }\n  }\n\n  render() {\n\n    /*let data = {\n      HotelClosed: true,\n      HotelReopenDate: \"2021-02-02\",\n      ConfinementZone: true,\n      ConfinementEnd: \"2022-02-02\",\n      NbBookings: 7,\n      NbCancelation: 8,\n      ClientLocation: {\n        'Pays #1': {\n          Nom: 'Paris',\n          Nombre: '7'\n        },\n        'Pays #2': {\n          Nom: 'Londres',\n          Nombre: '8'\n        },\n        'Pays #3': {\n          Nom: 'Maroc',\n          Nombre: '9'\n        },\n        Autres: {\n          Nom: 'New-York',\n          Nombre: '10'\n        }\n      },\n      BusinessSegment: {\n        FIT: \"8\",\n        MICE: \"9\",\n        Corporate: \"10\"\n      }\n    };*/\n\n    let json = {\n      \"pages\": [\n       {\n        \"name\": \"GENERAL INFORMATION\",\n        \"elements\": [\n         {\n          \"type\": \"panel\",\n          \"name\": \"Hotel Closure\",\n          \"elements\": [\n           {\n            \"type\": \"boolean\",\n            \"name\": \"IsHotelClosed\",\n            \"title\": \"Is your hotel closed ?\",\n            \"isRequired\": true,\n            \"labelTrue\": \"Yes\",\n            \"labelFalse\": \"No\"\n           },\n           {\n            \"type\": \"text\",\n            \"name\": \"HotelReopeningDate\",\n            \"visibleIf\": \"{IsHotelClosed} = true\",\n            \"width\": \"25\",\n            \"title\": \"If yes, expected reopening date ?\",\n            \"isRequired\": true,\n            \"inputType\": \"date\",\n            \"max\": \"2999-12-31\"\n           }\n          ],\n          \"title\": \"Hotel Closure\"\n         },\n         {\n          \"type\": \"panel\",\n          \"name\": \"Local containment\",\n          \"elements\": [\n           {\n            \"type\": \"boolean\",\n            \"name\": \"isHotelContainmentZone\",\n            \"title\": \"Is your hotel located in a containment zone ?\",\n            \"isRequired\": true,\n            \"labelTrue\": \"Yes\",\n            \"labelFalse\": \"No\"\n           },\n           {\n            \"type\": \"text\",\n            \"name\": \"HotelContainmentEndDate\",\n            \"visibleIf\": \"{isHotelContainmentZone} = true\",\n            \"width\": \"25\",\n            \"title\": \"If yes, official end of containment date ? (expected date)\",\n            \"isRequired\": true,\n            \"inputType\": \"date\",\n            \"max\": \"2999-12-31\"\n           }\n          ],\n          \"title\": \"Local containment\"\n         }\n        ],\n        \"title\": \"GENERAL INFORMATION\"\n       },\n       {\n        \"name\": \"LAST WEEK ACTIVITY\",\n        \"elements\": [\n         {\n          \"type\": \"panel\",\n          \"name\": \"LastWeekActivity\",\n          \"elements\": [\n           {\n            \"type\": \"text\",\n            \"name\": \"NbBookings\",\n            \"width\": \"10\",\n            \"title\": \"Total number of bookings\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n           },\n           {\n            \"type\": \"text\",\n            \"name\": \"NbRoomNightsBooked\",\n            \"width\": \"10\",\n            \"title\": \"Total number of room nights booked\",\n            \"isRequired\": true,\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n           },\n           {\n            \"type\": \"text\",\n            \"name\": \"NbRoomNightsCanceled\",\n            \"width\": \"10\",\n            \"title\": \"Total number of room nights cancelled\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n           }\n          ],\n          \"title\": \"Last Week Activity - General Information\"\n         },\n         {\n          \"type\": \"panel\",\n          \"name\": \"panel1\",\n          \"elements\": [\n           {\n            \"type\": \"matrixdropdown\",\n            \"name\": \"RoomsNightsSplit\",\n            \"width\": \"300\",\n            \"title\": \"Split of total room nights booked by client country of origin (countries 1 to 5 in number of nights descending order)\",\n            \"columns\": [\n             {\n              \"name\": \"Country\",\n              \"title\": \"Country\",\n              \"cellType\": \"dropdown\",\n              \"width\": \"20\",\n              \"choicesByUrl\": {\n               \"url\": \"https://restcountries.eu/rest/v2/all\",\n               \"valueName\": \"name\"\n              }\n             },\n             {\n              \"name\": \"NbRoomNights\",\n              \"title\": \"NB of room nights\",\n              \"cellType\": \"text\",\n              \"width\": \"10\",\n              \"totalExpression\": \"{NbRoomNightsBooked}-{RoomsNightsSplit.Country1.NbRoomNights}-{RoomsNightsSplit.Country2.NbRoomNights}-{RoomsNightsSplit.Country3.NbRoomNights}-{RoomsNightsSplit.Country4.NbRoomNights}-{RoomsNightsSplit.Country5.NbRoomNights}\",\n              \"totalDisplayStyle\": \"decimal\",\n              \"inputType\": \"number\"\n             }\n            ],\n            \"rows\": [\n             {\n              \"value\": \"Country1\",\n              \"text\": \"Country of Origin #1 (largest)\"\n             },\n             {\n              \"value\": \"Country2\",\n              \"text\": \"Country of Origin #2 \"\n             },\n             {\n              \"value\": \"Country3\",\n              \"text\": \"Country of Origin #3\"\n             },\n             {\n              \"value\": \"Country4\",\n              \"text\": \"Country of Origin #4\"\n             },\n             {\n              \"value\": \"Country5\",\n              \"text\": \"Country of Origin #5\"\n             }\n            ],\n            \"totalText\": \"Other Countries\"\n           }\n          ]\n         },\n         {\n          \"type\": \"panel\",\n          \"name\": \"panel2\",\n          \"elements\": [\n           {\n            \"type\": \"text\",\n            \"name\": \"FIT\",\n            \"width\": \"10\",\n            \"title\": \"FIT\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n           },\n           {\n            \"type\": \"text\",\n            \"name\": \"MICE\",\n            \"width\": \"10\",\n            \"title\": \"MICE\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n           },\n           {\n            \"type\": \"text\",\n            \"name\": \"Corporate\",\n            \"width\": \"10\",\n            \"title\": \"Corporate\",\n            \"titleLocation\": \"left\",\n            \"inputType\": \"number\",\n            \"size\": 10\n           }\n          ],\n          \"title\": \"Split of total room nights booked by business segment\"\n         },\n         {\n          \"type\": \"panel\",\n          \"name\": \"panel3\",\n          \"elements\": [\n           {\n            \"type\": \"matrixdropdown\",\n            \"name\": \"SplitByMonth\",\n            \"title\": \"Split of total room nights booked by stay month\",\n            \"columns\": [\n             {\n              \"name\": \"M1\",\n              \"title\": \"Stay in April 2020\",\n              \"width\": \"10\"\n             },\n             {\n              \"name\": \"M2\",\n              \"title\": \"Stay in May 2020\",\n              \"width\": \"10\"\n             },\n             {\n              \"name\": \"M3\",\n              \"title\": \"Stay in June 2020\",\n              \"width\": \"10\"\n             },\n             {\n              \"name\": \"M4\",\n              \"title\": \"Stay in July 2020\",\n              \"width\": \"10\"\n             },\n             {\n              \"name\": \"M5\",\n              \"title\": \"Stay in August 2020\",\n              \"width\": \"10\"\n             },\n             {\n              \"name\": \"M6\",\n              \"title\": \"Stay in September 2020\",\n              \"width\": \"10\"\n             },\n             {\n              \"name\": \"M7\",\n              \"title\": \"Stay from October 2020 or later\",\n              \"cellType\": \"expression\",\n              \"width\": \"10\",\n              \"expression\": \"{NbRoomNightsBooked}-{row.M1}+{row.M2}+{row.M3}-{row.M4}+{row.M5}+{row.M6}\"\n             }\n            ],\n            \"choices\": [\n             1,\n             2,\n             3,\n             4,\n             5\n            ],\n            \"cellType\": \"text\",\n            \"rows\": [\n             {\n              \"value\": \"NbRoomsByMonth\",\n              \"text\": \"Number of room nights booked last week\"\n             }\n            ]\n           }\n          ]\n         }\n        ],\n        \"title\": \"LAST WEEK ACTIVITY (from Monday to Sunday)\"\n       },\n       {\n        \"name\": \"ON THE BOOK\",\n        \"elements\": [\n         {\n          \"type\": \"text\",\n          \"name\": \"TotalNumberRoomNightsAvailable\",\n          \"width\": \"10\",\n          \"title\": \"Total number of rooms nights available for sale (on a monthly basis)\",\n          \"titleLocation\": \"left\",\n          \"inputType\": \"number\",\n          \"size\": 10\n         },\n         {\n          \"type\": \"matrixdropdown\",\n          \"name\": \"SplitTotalRoomAvailable\",\n          \"title\": \"Split of total room nights available for sale by month\",\n          \"columns\": [\n           {\n            \"name\": \"M1\",\n            \"title\": \"April 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M1}\"\n           },\n           {\n            \"name\": \"M2\",\n            \"title\": \"May 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M2}\"\n           },\n           {\n            \"name\": \"M3\",\n            \"title\": \"June 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M3}\"\n           },\n           {\n            \"name\": \"M4\",\n            \"title\": \"July 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M4}\"\n           },\n           {\n            \"name\": \"M5\",\n            \"title\": \"August 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M5}\"\n           },\n           {\n            \"name\": \"M6\",\n            \"title\": \"September 2020\",\n            \"width\": \"10\",\n            \"totalExpression\": \"{NbRoomNightsBooked}-{SplitTotalRoomAvailable.NbOfOccupiedRooms.M6}\"\n           }\n          ],\n          \"choices\": [\n           1,\n           2,\n           3,\n           4,\n           5\n          ],\n          \"cellType\": \"text\",\n          \"rows\": [\n           {\n            \"value\": \"NbOfOccupiedRooms\",\n            \"text\": \"Number of occupied rooms\"\n           }\n          ],\n          \"totalText\": \"Total number of rooms nights available for sale\"\n         },\n         {\n          \"type\": \"panel\",\n          \"name\": \"panel4\"\n         }\n        ],\n        \"title\": \"ON THE BOOK (stay month)\"\n       }\n      ]\n     };\n\n    var surveyRender = !this.state.isCompleted ? (\n      <Survey.Survey\n        json={json}\n        /*data={data}*/\n        showCompletedPage={false}\n        onComplete={this.onCompleteComponent}\n      />\n    ) : null;\n\n    \n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return (\n      <div>\n        {surveyRender}\n      </div>\n    );\n  }\n}\n\nexport default SurveyComponent;"]},"metadata":{},"sourceType":"module"}