{"ast":null,"code":"import _regeneratorRuntime from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import*as Survey from\"survey-react\";import\"survey-react/survey.css\";import{createSurvey,createTracking,createFirstLogin}from\"../graphql/mutations\";import{graphqlOperation,API}from\"aws-amplify\";import{history}from'../AppWithAuth';import firstSurvey from'../survey/FirstServey';import finalSurvey from'../survey/FinalSurvey';Survey.StylesManager.applyTheme(\"orange\");var SurveyComponent=/*#__PURE__*/function(_Component){_inherits(SurveyComponent,_Component);var _super=_createSuper(SurveyComponent);function SurveyComponent(){var _this;_classCallCheck(this,SurveyComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isCompleted:false,finalResult:\"\"};_this.onCompleteComponent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!(_this.props.hotelLocation===\"\")){_context.next=7;break;}console.log(result);console.log(\"Hotel Location :  \"+result.data.HotelLocation);console.log(_this.props.userAttributes);_context.next=7;return API.graphql(graphqlOperation(createFirstLogin,{input:{'Email':_this.props.userAttributes.email,'Sub':_this.props.userAttributes.sub,'LocationHotel':result.data.HotelLocation}}));case 7://await API.graphql(graphqlOperation(createSurvey, {input:result.data} ));\n//await API.graphql(graphqlOperation(createTracking, {input:{'HotelName':hotelName}}));\nconsole.log(result.data);_this.setState({isCompleted:true});history.push('/Final');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error(\"error during delete\",_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SurveyComponent,[{key:\"render\",value:function render(){var json=this.props.hotelLocation===\"\"?firstSurvey:finalSurvey;var surveyRender=!this.state.isCompleted?/*#__PURE__*/React.createElement(Survey.Survey,{json:json//data={data}\n,showCompletedPage:false,onComplete:this.onCompleteComponent}):null;/*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/return/*#__PURE__*/React.createElement(\"div\",null,surveyRender);}}]);return SurveyComponent;}(Component);export default SurveyComponent;","map":{"version":3,"sources":["/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js"],"names":["React","Component","Survey","createSurvey","createTracking","createFirstLogin","graphqlOperation","API","history","firstSurvey","finalSurvey","StylesManager","applyTheme","SurveyComponent","state","isCompleted","finalResult","onCompleteComponent","result","props","hotelLocation","console","log","data","HotelLocation","userAttributes","graphql","input","email","sub","setState","push","error","json","surveyRender"],"mappings":"u6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,MAAZ,KAAwB,cAAxB,CACA,MAAO,yBAAP,CACA,OAASC,YAAT,CAAuBC,cAAvB,CAAuCC,gBAAvC,KAA+D,sBAA/D,CACA,OAASC,gBAAT,CAA2BC,GAA3B,KAAsC,aAAtC,CACA,OAASC,OAAT,KAAwB,gBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CAEAR,MAAM,CAACS,aAAP,CAAqBC,UAArB,CAAgC,QAAhC,E,GAEMC,CAAAA,e,+VAEJC,K,CAAQ,CACNC,WAAW,CAAG,KADR,CAENC,WAAW,CAAG,EAFR,C,OAKRC,mB,0FAAsB,iBAAOC,MAAP,uIAEd,MAAKC,KAAL,CAAWC,aAAX,GAA6B,EAFf,0BAGhBC,OAAO,CAACC,GAAR,CAAYJ,MAAZ,EACAG,OAAO,CAACC,GAAR,CAAY,qBAAuBJ,MAAM,CAACK,IAAP,CAAYC,aAA/C,EACAH,OAAO,CAACC,GAAR,CAAY,MAAKH,KAAL,CAAWM,cAAvB,EALgB,sBAMVlB,CAAAA,GAAG,CAACmB,OAAJ,CAAYpB,gBAAgB,CAACD,gBAAD,CAAmB,CAACsB,KAAK,CAAC,CAAC,QAAQ,MAAKR,KAAL,CAAWM,cAAX,CAA0BG,KAAnC,CAA0C,MAAM,MAAKT,KAAL,CAAWM,cAAX,CAA0BI,GAA1E,CAA8E,gBAAgBX,MAAM,CAACK,IAAP,CAAYC,aAA1G,CAAP,CAAnB,CAA5B,CANU,QASlB;AACA;AACAH,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACK,IAAnB,EACA,MAAKO,QAAL,CAAc,CAAEf,WAAW,CAAE,IAAf,CAAd,EACAP,OAAO,CAACuB,IAAR,CAAa,QAAb,EAbkB,iFAelBV,OAAO,CAACW,KAAR,CAAc,qBAAd,cAfkB,qE,gJAmBb,CAIP,GAAIC,CAAAA,IAAI,CAAI,KAAKd,KAAL,CAAWC,aAAX,GAA6B,EAA9B,CAAmCX,WAAnC,CAAiDC,WAA5D,CAGA,GAAIwB,CAAAA,YAAY,CAAG,CAAC,KAAKpB,KAAL,CAAWC,WAAZ,cACjB,oBAAC,MAAD,CAAQ,MAAR,EACE,IAAI,CAAEkB,IACN;AAFF,CAGE,iBAAiB,CAAE,KAHrB,CAIE,UAAU,CAAE,KAAKhB,mBAJnB,EADiB,CAOf,IAPJ,CAUA;eAGA,mBACE,+BACGiB,YADH,CADF,CAKD,C,6BAnD2BjC,S,EAsD9B,cAAeY,CAAAA,eAAf","sourcesContent":["import React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking, createFirstLogin } from \"../graphql/mutations\";\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nimport firstSurvey from '../survey/FirstServey';\nimport finalSurvey from '../survey/FinalSurvey';\n\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n\n  state = {\n    isCompleted : false,\n    finalResult : \"\"\n  }\n\n  onCompleteComponent = async (result) => {\n    try {\n      if (this.props.hotelLocation === \"\"){\n        console.log(result);\n        console.log(\"Hotel Location :  \" + result.data.HotelLocation);\n        console.log(this.props.userAttributes);\n        await API.graphql(graphqlOperation(createFirstLogin, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub,'LocationHotel':result.data.HotelLocation}}));\n      }\n\n      //await API.graphql(graphqlOperation(createSurvey, {input:result.data} ));\n      //await API.graphql(graphqlOperation(createTracking, {input:{'HotelName':hotelName}}));\n      console.log(result.data);\n      this.setState({ isCompleted: true});\n      history.push('/Final');\n    } catch (err) {\n      console.error(\"error during delete\", err);\n    }\n  }\n\n  render() {\n\n\n   \n    var json = (this.props.hotelLocation === \"\")? firstSurvey : finalSurvey;\n    \n\n    var surveyRender = !this.state.isCompleted ? (\n      <Survey.Survey\n        json={json}\n        //data={data}\n        showCompletedPage={false}\n        onComplete={this.onCompleteComponent}\n      />\n    ) : null;\n\n    \n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return (\n      <div>\n        {surveyRender}\n      </div>\n    );\n  }\n}\n\nexport default SurveyComponent;"]},"metadata":{},"sourceType":"module"}