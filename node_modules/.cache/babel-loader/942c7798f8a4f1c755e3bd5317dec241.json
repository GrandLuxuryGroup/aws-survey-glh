{"ast":null,"code":"import _regeneratorRuntime from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/christophe/dev/amplify/glh-survey/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import*as Survey from\"survey-react\";import\"survey-react/survey.css\";import{createSurvey,createTracking,createFirstLogin,createClientCountry}from\"../graphql/mutations\";import{listTrackings}from'../graphql/queries';import{graphqlOperation,API}from\"aws-amplify\";import{history}from'../AppWithAuth';import firstSurvey from'../survey/FirstServey';import finalSurvey from'../survey/FinalSurvey';Survey.StylesManager.applyTheme(\"orange\");var SurveyComponent=/*#__PURE__*/function(_Component){_inherits(SurveyComponent,_Component);var _super=_createSuper(SurveyComponent);function SurveyComponent(){var _this;_classCallCheck(this,SurveyComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isCompleted:false,finalResult:\"\"};_this.onCompleteComponent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){var hotelLocation,trakings,Week,HotelLocation,IsHotelClosed,HotelReopeningDate,IsHotelContainmentZone,HotelContainmentEndDate,NbBookings,NbRoomNightsBooked,NbRoomNightsCanceled,SplitTotalRoomsBusinessSegment,NbRoomNightsBookedFIT,NbRoomNightsBookedMICE,NbRoomNightsBookedCorporate,RemainingRoomNightsBySegment,RoomsNightsSplit,RoomNightsCountry1,NbRoomNightsBookedCountry1,RoomNightsCountry2,NbRoomNightsBookedCountry2,RoomNightsCountry3,NbRoomNightsBookedCountry3,RoomNightsCountry4,NbRoomNightsBookedCountry4,RoomNightsCountry5,NbRoomNightsBookedCountry5,SplitByMonth,NbRoomNightsBookedLastWeekApril,NbRoomNightsBookedLastWeekMay,NbRoomNightsBookedLastWeekJune,NbRoomNightsBookedLastWeekJuly,NbRoomNightsBookedLastWeekAugust,NbRoomNightsBookedLastWeekSeptember,TotalNightsBookedLastWeek,TotalNumberRoomAvailable,SplitTotalRoomAvailable,NbOccupiedRoomNightsAvril,NbOccupiedRoomNightsMay,NbOccupiedRoomNightsJune,NbOccupiedRoomNightsJuly,NbOccupiedRoomNightsAugust,NbOccupiedRoomNightsSeptember,NbTotalRoomNightsAvril,NbTotalRoomNightsMay,NbTotalRoomNightsJune,NbTotalRoomNightsJuly,NbTotalRoomNightsAugust,NbTotalRoomNightsSeptember,OccupancyRateApril,OccupancyRateMay,OccupancyRateJune,OccupancyRateJuly,OccupancyRateAugust,OccupancyRateSeptember,Result,resultSurvey;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:hotelLocation=\"\";_context.prev=1;console.log(_this.props.hotelLocation);if(!(_this.props.hotelLocation===\"\")){_context.next=9;break;}hotelLocation=result.data.HotelLocation;_context.next=7;return API.graphql(graphqlOperation(createFirstLogin,{input:{'Email':_this.props.userAttributes.email,'Sub':_this.props.userAttributes.sub,'LocationHotel':result.data.HotelLocation}}));case 7:_context.next=10;break;case 9:hotelLocation=_this.props.hotelLocation;case 10:_context.next=12;return API.graphql(graphqlOperation(listTrackings,{filter:{and:[{Sub:{eq:_this.props.userAttributes.sub},Week:{eq:'W1'}}]}}));case 12:trakings=_context.sent;if(!(trakings.data.listTrackings.items.length===0)){_context.next=106;break;}console.log(result.data);console.log(_this.props.hotelLocation);Week='W2';//Page1 \nHotelLocation=hotelLocation;IsHotelClosed=result.data.IsHotelClosed;HotelReopeningDate=result.data.HotelReopeningDate;IsHotelContainmentZone=result.data.isHotelContainmentZone;HotelContainmentEndDate=result.data.HotelContainmentEndDate;//Page 2\nNbBookings=result.data.NbBookings;NbRoomNightsBooked=result.data.NbRoomNightsBooked;NbRoomNightsCanceled=result.data.NbRoomNightsCanceled;SplitTotalRoomsBusinessSegment=result.data['SplitTotalRoomsBusinessSegment'];NbRoomNightsBookedFIT=0;NbRoomNightsBookedMICE=0;NbRoomNightsBookedCorporate=0;RemainingRoomNightsBySegment=0;if(SplitTotalRoomsBusinessSegment){NbRoomNightsBookedFIT=SplitTotalRoomsBusinessSegment['FIT']?SplitTotalRoomsBusinessSegment['FIT'].NbRoomsNightsBS:0;NbRoomNightsBookedMICE=SplitTotalRoomsBusinessSegment['MICE']?SplitTotalRoomsBusinessSegment['MICE'].NbRoomsNightsBS:0;NbRoomNightsBookedCorporate=SplitTotalRoomsBusinessSegment['Corporate']?SplitTotalRoomsBusinessSegment['Corporate'].NbRoomsNightsBS:0;}RemainingRoomNightsBySegment=result.data['SplitTotalRoomsBusinessSegment-total'].NbRoomsNightsBS;RoomsNightsSplit=result.data['RoomsNightsSplit'];RoomNightsCountry1=null;NbRoomNightsBookedCountry1=0;RoomNightsCountry2=null;NbRoomNightsBookedCountry2=0;RoomNightsCountry3=null;NbRoomNightsBookedCountry3=0;RoomNightsCountry4=null;NbRoomNightsBookedCountry4=0;RoomNightsCountry5=null;NbRoomNightsBookedCountry5=0;if(RoomsNightsSplit){RoomNightsCountry1=RoomsNightsSplit['Country1']?RoomsNightsSplit['Country1'].Country?RoomsNightsSplit['Country1'].Country:null:null;NbRoomNightsBookedCountry1=RoomsNightsSplit['Country1']?RoomsNightsSplit['Country1'].NbRoomNights:0;RoomNightsCountry2=RoomsNightsSplit['Country2']?RoomsNightsSplit['Country2'].Country?RoomsNightsSplit['Country2'].Country:null:null;NbRoomNightsBookedCountry2=RoomsNightsSplit['Country2']?RoomsNightsSplit['Country2'].NbRoomNights:0;RoomNightsCountry3=RoomsNightsSplit['Country3']?RoomsNightsSplit['Country3'].Country?RoomsNightsSplit['Country3'].Country:null:null;NbRoomNightsBookedCountry3=RoomsNightsSplit['Country3']?RoomsNightsSplit['Country3'].NbRoomNights:0;RoomNightsCountry4=RoomsNightsSplit['Country4']?RoomsNightsSplit['Country4'].Country?RoomsNightsSplit['Country4'].Country:null:null;NbRoomNightsBookedCountry4=RoomsNightsSplit['Country4']?RoomsNightsSplit['Country4'].NbRoomNights:0;RoomNightsCountry5=RoomsNightsSplit['Country5']?RoomsNightsSplit['Country5'].Country?RoomsNightsSplit['Country5'].Country:null:null;NbRoomNightsBookedCountry5=RoomsNightsSplit['Country5']?RoomsNightsSplit['Country5'].NbRoomNights:0;}console.log(RoomNightsCountry1);console.log(NbRoomNightsBookedCountry1);console.log(RoomNightsCountry2);console.log(NbRoomNightsBookedCountry2);SplitByMonth=result.data['SplitByMonth'];NbRoomNightsBookedLastWeekApril=0;NbRoomNightsBookedLastWeekMay=0;NbRoomNightsBookedLastWeekJune=0;NbRoomNightsBookedLastWeekJuly=0;NbRoomNightsBookedLastWeekAugust=0;NbRoomNightsBookedLastWeekSeptember=0;TotalNightsBookedLastWeek=0;if(SplitByMonth){NbRoomNightsBookedLastWeekApril=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M1?SplitByMonth['NbRoomsByMonth'].M1:0:0;NbRoomNightsBookedLastWeekMay=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M2?SplitByMonth['NbRoomsByMonth'].M2:0:0;NbRoomNightsBookedLastWeekJune=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M3?SplitByMonth['NbRoomsByMonth'].M3:0:0;NbRoomNightsBookedLastWeekJuly=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M4?SplitByMonth['NbRoomsByMonth'].M4:0:0;NbRoomNightsBookedLastWeekAugust=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M5?SplitByMonth['NbRoomsByMonth'].M5:0:0;NbRoomNightsBookedLastWeekSeptember=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M6?SplitByMonth['NbRoomsByMonth'].M6:0:0;TotalNightsBookedLastWeek=SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M7?SplitByMonth['NbRoomsByMonth'].M7:0:0;}console.log(NbRoomNightsBookedLastWeekApril);console.log(NbRoomNightsBookedLastWeekMay);//Page 3\nTotalNumberRoomAvailable=result.data.TotalNumberRoomAvailable;SplitTotalRoomAvailable=result.data['SplitTotalRoomAvailable'];NbOccupiedRoomNightsAvril=0;NbOccupiedRoomNightsMay=0;NbOccupiedRoomNightsJune=0;NbOccupiedRoomNightsJuly=0;NbOccupiedRoomNightsAugust=0;NbOccupiedRoomNightsSeptember=0;NbTotalRoomNightsAvril=0;NbTotalRoomNightsMay=0;NbTotalRoomNightsJune=0;NbTotalRoomNightsJuly=0;NbTotalRoomNightsAugust=0;NbTotalRoomNightsSeptember=0;if(SplitTotalRoomAvailable){NbOccupiedRoomNightsAvril=SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1:0:0;NbOccupiedRoomNightsMay=SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2:0:0;NbOccupiedRoomNightsJune=SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3:0:0;NbOccupiedRoomNightsJuly=SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4:0:0;NbOccupiedRoomNightsAugust=SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5:0:0;NbOccupiedRoomNightsSeptember=SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6:0:0;NbTotalRoomNightsAvril=SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1:0:0;NbTotalRoomNightsMay=SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2:0:0;NbTotalRoomNightsJune=SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3:0:0;NbTotalRoomNightsJuly=SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4:0:0;NbTotalRoomNightsAugust=SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5:0:0;NbTotalRoomNightsSeptember=SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6:0:0;}SplitTotalRoomAvailable=result.data['SplitTotalRoomAvailable-total'];OccupancyRateApril=0;OccupancyRateMay=0;OccupancyRateJune=0;OccupancyRateJuly=0;OccupancyRateAugust=0;OccupancyRateSeptember=0;if(SplitTotalRoomAvailable){OccupancyRateApril=SplitTotalRoomAvailable.M1?SplitTotalRoomAvailable.M1:0;OccupancyRateMay=SplitTotalRoomAvailable.M2?SplitTotalRoomAvailable.M2:0;OccupancyRateJune=SplitTotalRoomAvailable.M3?SplitTotalRoomAvailable.M3:0;OccupancyRateJuly=SplitTotalRoomAvailable.M4?SplitTotalRoomAvailable.M4:0;OccupancyRateAugust=SplitTotalRoomAvailable.M5?SplitTotalRoomAvailable.M5:0;OccupancyRateSeptember=SplitTotalRoomAvailable.M6?SplitTotalRoomAvailable.M6:0;}//\nResult=result.data;_context.next=85;return API.graphql(graphqlOperation(createSurvey,{input:{IsHotelClosed:IsHotelClosed,IsHotelContainmentZone:IsHotelContainmentZone,HotelContainmentEndDate:HotelContainmentEndDate,HotelReopeningDate:HotelReopeningDate,NbBookings:NbBookings,NbRoomNightsBooked:NbRoomNightsBooked,NbRoomNightsCanceled:NbRoomNightsCanceled,NbRoomNightsBookedFIT:NbRoomNightsBookedFIT,NbRoomNightsBookedMICE:NbRoomNightsBookedMICE,NbRoomNightsBookedCorporate:NbRoomNightsBookedCorporate,RemainingRoomNightsBySegment:RemainingRoomNightsBySegment,RoomNightsCountry1:RoomNightsCountry1,NbRoomNightsBookedCountry1:NbRoomNightsBookedCountry1,RoomNightsCountry2:RoomNightsCountry2,NbRoomNightsBookedCountry2:NbRoomNightsBookedCountry2,RoomNightsCountry3:RoomNightsCountry3,NbRoomNightsBookedCountry3:NbRoomNightsBookedCountry3,RoomNightsCountry4:RoomNightsCountry4,NbRoomNightsBookedCountry4:NbRoomNightsBookedCountry4,RoomNightsCountry5:RoomNightsCountry5,NbRoomNightsBookedCountry5:NbRoomNightsBookedCountry5,NbRoomNightsBookedLastWeekApril:NbRoomNightsBookedLastWeekApril,NbRoomNightsBookedLastWeekMay:NbRoomNightsBookedLastWeekMay,NbRoomNightsBookedLastWeekAugust:NbRoomNightsBookedLastWeekAugust,NbRoomNightsBookedLastWeekSeptember:NbRoomNightsBookedLastWeekSeptember,TotalNightsBookedLastWeek:TotalNightsBookedLastWeek,NbRoomNightsBookedLastWeekJune:NbRoomNightsBookedLastWeekJune,NbRoomNightsBookedLastWeekJuly:NbRoomNightsBookedLastWeekJuly,TotalNumberRoomAvailable:TotalNumberRoomAvailable,NbOccupiedRoomNightsAvril:NbOccupiedRoomNightsAvril,NbOccupiedRoomNightsAugust:NbOccupiedRoomNightsAugust,NbOccupiedRoomNightsJuly:NbOccupiedRoomNightsJuly,NbOccupiedRoomNightsJune:NbOccupiedRoomNightsJune,NbOccupiedRoomNightsMay:NbOccupiedRoomNightsMay,NbOccupiedRoomNightsSeptember:NbOccupiedRoomNightsSeptember,NbTotalRoomNightsAugust:NbTotalRoomNightsAugust,NbTotalRoomNightsAvril:NbTotalRoomNightsAvril,NbTotalRoomNightsJuly:NbTotalRoomNightsJuly,NbTotalRoomNightsJune:NbTotalRoomNightsJune,NbTotalRoomNightsMay:NbTotalRoomNightsMay,NbTotalRoomNightsSeptember:NbTotalRoomNightsSeptember,OccupancyRateApril:OccupancyRateApril,OccupancyRateAugust:OccupancyRateAugust,OccupancyRateJuly:OccupancyRateJuly,OccupancyRateJune:OccupancyRateJune,OccupancyRateMay:OccupancyRateMay,OccupancyRateSeptember:OccupancyRateSeptember,Week:Week,Result:Result,HotelLocation:HotelLocation}}));case 85:resultSurvey=_context.sent;console.log(resultSurvey);if(!(NbRoomNightsBookedCountry1>0)){_context.next=90;break;}_context.next=90;return API.graphql(graphqlOperation(createClientCountry,{input:{'Country':RoomNightsCountry1,'NumberOfClientBookings':NbRoomNightsBookedCountry1,Week:Week}}));case 90:if(!(NbRoomNightsBookedCountry2>0)){_context.next=93;break;}_context.next=93;return API.graphql(graphqlOperation(createClientCountry,{input:{'Country':RoomNightsCountry2,'NumberOfClientBookings':NbRoomNightsBookedCountry2,Week:Week}}));case 93:if(!(NbRoomNightsBookedCountry3>0)){_context.next=96;break;}_context.next=96;return API.graphql(graphqlOperation(createClientCountry,{input:{'Country':RoomNightsCountry3,'NumberOfClientBookings':NbRoomNightsBookedCountry3,Week:Week}}));case 96:if(!(NbRoomNightsBookedCountry4>0)){_context.next=99;break;}_context.next=99;return API.graphql(graphqlOperation(createClientCountry,{input:{'Country':RoomNightsCountry4,'NumberOfClientBookings':NbRoomNightsBookedCountry4,Week:Week}}));case 99:if(!(NbRoomNightsBookedCountry5>0)){_context.next=102;break;}_context.next=102;return API.graphql(graphqlOperation(createClientCountry,{input:{'Country':RoomNightsCountry5,'NumberOfClientBookings':NbRoomNightsBookedCountry5,Week:Week}}));case 102://await API.graphql(graphqlOperation(createTracking, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub, Week }}));\n_this.setState({isCompleted:true});history.push('/Final');_context.next=107;break;case 106:history.push('/FinalRetry');case 107:_context.next=112;break;case 109:_context.prev=109;_context.t0=_context[\"catch\"](1);console.error(\"error during delete\",_context.t0);case 112:case\"end\":return _context.stop();}}},_callee,null,[[1,109]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SurveyComponent,[{key:\"render\",value:function render(){var json=this.props.hotelLocation===\"\"?firstSurvey:finalSurvey;var surveyRender=!this.state.isCompleted?/*#__PURE__*/React.createElement(Survey.Survey,{json:json//data={data}\n,showCompletedPage:false,onComplete:this.onCompleteComponent}):null;/*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/return/*#__PURE__*/React.createElement(\"div\",null,surveyRender);}}]);return SurveyComponent;}(Component);export default SurveyComponent;","map":{"version":3,"sources":["/Users/christophe/dev/amplify/glh-survey/src/components/SurveyComponent.js"],"names":["React","Component","Survey","createSurvey","createTracking","createFirstLogin","createClientCountry","listTrackings","graphqlOperation","API","history","firstSurvey","finalSurvey","StylesManager","applyTheme","SurveyComponent","state","isCompleted","finalResult","onCompleteComponent","result","hotelLocation","console","log","props","data","HotelLocation","graphql","input","userAttributes","email","sub","filter","and","Sub","eq","Week","trakings","items","length","IsHotelClosed","HotelReopeningDate","IsHotelContainmentZone","isHotelContainmentZone","HotelContainmentEndDate","NbBookings","NbRoomNightsBooked","NbRoomNightsCanceled","SplitTotalRoomsBusinessSegment","NbRoomNightsBookedFIT","NbRoomNightsBookedMICE","NbRoomNightsBookedCorporate","RemainingRoomNightsBySegment","NbRoomsNightsBS","RoomsNightsSplit","RoomNightsCountry1","NbRoomNightsBookedCountry1","RoomNightsCountry2","NbRoomNightsBookedCountry2","RoomNightsCountry3","NbRoomNightsBookedCountry3","RoomNightsCountry4","NbRoomNightsBookedCountry4","RoomNightsCountry5","NbRoomNightsBookedCountry5","Country","NbRoomNights","SplitByMonth","NbRoomNightsBookedLastWeekApril","NbRoomNightsBookedLastWeekMay","NbRoomNightsBookedLastWeekJune","NbRoomNightsBookedLastWeekJuly","NbRoomNightsBookedLastWeekAugust","NbRoomNightsBookedLastWeekSeptember","TotalNightsBookedLastWeek","M1","M2","M3","M4","M5","M6","M7","TotalNumberRoomAvailable","SplitTotalRoomAvailable","NbOccupiedRoomNightsAvril","NbOccupiedRoomNightsMay","NbOccupiedRoomNightsJune","NbOccupiedRoomNightsJuly","NbOccupiedRoomNightsAugust","NbOccupiedRoomNightsSeptember","NbTotalRoomNightsAvril","NbTotalRoomNightsMay","NbTotalRoomNightsJune","NbTotalRoomNightsJuly","NbTotalRoomNightsAugust","NbTotalRoomNightsSeptember","OccupancyRateApril","OccupancyRateMay","OccupancyRateJune","OccupancyRateJuly","OccupancyRateAugust","OccupancyRateSeptember","Result","resultSurvey","setState","push","error","json","surveyRender"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as Survey from \"survey-react\";\nimport \"survey-react/survey.css\";\nimport { createSurvey, createTracking, createFirstLogin, createClientCountry } from \"../graphql/mutations\";\nimport { listTrackings } from '../graphql/queries';\nimport { graphqlOperation, API } from \"aws-amplify\";\nimport { history } from '../AppWithAuth';\nimport firstSurvey from '../survey/FirstServey';\nimport finalSurvey from '../survey/FinalSurvey';\n\nSurvey.StylesManager.applyTheme(\"orange\");\n\nclass SurveyComponent extends Component {\n\n  state = {\n    isCompleted : false,\n    finalResult : \"\"\n  }\n\n  onCompleteComponent = async (result) => {\n    var hotelLocation=\"\";\n    try {\n      console.log(this.props.hotelLocation);\n      if (this.props.hotelLocation === \"\"){\n        hotelLocation = result.data.HotelLocation;\n        await API.graphql(graphqlOperation(createFirstLogin, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub,'LocationHotel':result.data.HotelLocation}}));\n      } else {\n        hotelLocation = this.props.hotelLocation;\n      }\n\n      const trakings = await API.graphql(graphqlOperation(listTrackings,  {\n          filter: {\n              and : [{\n              Sub: {\n                  eq: this.props.userAttributes.sub\n              },\n              Week:{\n                eq : 'W1'\n              }\n            }]\n          }\n        }));\n\n      if (trakings.data.listTrackings.items.length === 0) {\n       console.log(result.data);\n       console.log(this.props.hotelLocation);\n\n        var Week = 'W2'\n\n        //Page1 \n        var HotelLocation = hotelLocation;\n        var IsHotelClosed = result.data.IsHotelClosed;\n        var HotelReopeningDate = result.data.HotelReopeningDate;\n        var IsHotelContainmentZone = result.data.isHotelContainmentZone;\n        var HotelContainmentEndDate = result.data.HotelContainmentEndDate;\n\n        //Page 2\n\n        var NbBookings = result.data.NbBookings;\n        var NbRoomNightsBooked = result.data.NbRoomNightsBooked;\n        var NbRoomNightsCanceled = result.data.NbRoomNightsCanceled;\n        var SplitTotalRoomsBusinessSegment = result.data['SplitTotalRoomsBusinessSegment'];\n\n        var  NbRoomNightsBookedFIT = 0;\n        var  NbRoomNightsBookedMICE = 0;\n        var  NbRoomNightsBookedCorporate = 0;\n        var  RemainingRoomNightsBySegment = 0;\n        if (SplitTotalRoomsBusinessSegment) {\n          NbRoomNightsBookedFIT = SplitTotalRoomsBusinessSegment['FIT']? SplitTotalRoomsBusinessSegment['FIT'].NbRoomsNightsBS : 0;\n          NbRoomNightsBookedMICE = SplitTotalRoomsBusinessSegment['MICE']?SplitTotalRoomsBusinessSegment['MICE'].NbRoomsNightsBS: 0;\n          NbRoomNightsBookedCorporate = SplitTotalRoomsBusinessSegment['Corporate']?SplitTotalRoomsBusinessSegment['Corporate'].NbRoomsNightsBS : 0;\n        }\n    \n        RemainingRoomNightsBySegment = result.data['SplitTotalRoomsBusinessSegment-total'].NbRoomsNightsBS;\n     \n        \n        var RoomsNightsSplit = result.data['RoomsNightsSplit'];\n        var RoomNightsCountry1 = null;\n        var NbRoomNightsBookedCountry1 = 0;\n        var RoomNightsCountry2 = null;\n        var NbRoomNightsBookedCountry2 = 0;\n        var RoomNightsCountry3 = null;\n        var NbRoomNightsBookedCountry3 = 0;\n        var RoomNightsCountry4 = null;\n        var NbRoomNightsBookedCountry4 = 0;\n        var RoomNightsCountry5 = null;\n        var NbRoomNightsBookedCountry5 = 0;\n        if (RoomsNightsSplit) {\n            RoomNightsCountry1 = RoomsNightsSplit['Country1']?RoomsNightsSplit['Country1'].Country?RoomsNightsSplit['Country1'].Country:null:null;\n            NbRoomNightsBookedCountry1 = RoomsNightsSplit['Country1']?RoomsNightsSplit['Country1'].NbRoomNights:0;\n            RoomNightsCountry2 = RoomsNightsSplit['Country2']?RoomsNightsSplit['Country2'].Country?RoomsNightsSplit['Country2'].Country:null:null;\n            NbRoomNightsBookedCountry2 = RoomsNightsSplit['Country2']?RoomsNightsSplit['Country2'].NbRoomNights:0;\n            RoomNightsCountry3 = RoomsNightsSplit['Country3']?RoomsNightsSplit['Country3'].Country?RoomsNightsSplit['Country3'].Country:null:null;\n            NbRoomNightsBookedCountry3 = RoomsNightsSplit['Country3']?RoomsNightsSplit['Country3'].NbRoomNights:0;\n            RoomNightsCountry4 = RoomsNightsSplit['Country4']?RoomsNightsSplit['Country4'].Country?RoomsNightsSplit['Country4'].Country:null:null;\n            NbRoomNightsBookedCountry4 = RoomsNightsSplit['Country4']?RoomsNightsSplit['Country4'].NbRoomNights:0;\n            RoomNightsCountry5 = RoomsNightsSplit['Country5']?RoomsNightsSplit['Country5'].Country?RoomsNightsSplit['Country5'].Country:null:null;\n            NbRoomNightsBookedCountry5 = RoomsNightsSplit['Country5']?RoomsNightsSplit['Country5'].NbRoomNights:0;\n        }\n        console.log(RoomNightsCountry1);\n        console.log(NbRoomNightsBookedCountry1);\n        console.log(RoomNightsCountry2);\n        console.log(NbRoomNightsBookedCountry2);\n        \n        var SplitByMonth = result.data['SplitByMonth'];\n        var  NbRoomNightsBookedLastWeekApril = 0;\n        var  NbRoomNightsBookedLastWeekMay = 0;\n        var  NbRoomNightsBookedLastWeekJune = 0;\n        var  NbRoomNightsBookedLastWeekJuly = 0;\n        var  NbRoomNightsBookedLastWeekAugust = 0;\n        var  NbRoomNightsBookedLastWeekSeptember =0;\n        var  TotalNightsBookedLastWeek = 0;\n\n        if (SplitByMonth) {\n          NbRoomNightsBookedLastWeekApril = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M1?SplitByMonth['NbRoomsByMonth'].M1:0:0;\n          NbRoomNightsBookedLastWeekMay = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M2?SplitByMonth['NbRoomsByMonth'].M2:0:0;\n          NbRoomNightsBookedLastWeekJune = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M3?SplitByMonth['NbRoomsByMonth'].M3:0:0;\n          NbRoomNightsBookedLastWeekJuly = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M4?SplitByMonth['NbRoomsByMonth'].M4:0:0;\n          NbRoomNightsBookedLastWeekAugust = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M5?SplitByMonth['NbRoomsByMonth'].M5:0:0;\n          NbRoomNightsBookedLastWeekSeptember = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M6?SplitByMonth['NbRoomsByMonth'].M6:0:0;\n          TotalNightsBookedLastWeek = SplitByMonth['NbRoomsByMonth']?SplitByMonth['NbRoomsByMonth'].M7?SplitByMonth['NbRoomsByMonth'].M7:0:0;\n        }\n        console.log(NbRoomNightsBookedLastWeekApril);\n        console.log(NbRoomNightsBookedLastWeekMay);\n\n      \n        //Page 3\n        \n        var TotalNumberRoomAvailable = result.data.TotalNumberRoomAvailable;\n\n        var SplitTotalRoomAvailable = result.data['SplitTotalRoomAvailable'];\n        var  NbOccupiedRoomNightsAvril= 0;\n          var  NbOccupiedRoomNightsMay=  0;\n          var  NbOccupiedRoomNightsJune=  0;\n          var  NbOccupiedRoomNightsJuly=  0;\n          var  NbOccupiedRoomNightsAugust=  0;\n          var  NbOccupiedRoomNightsSeptember=  0;\n          var  NbTotalRoomNightsAvril=  0;\n          var  NbTotalRoomNightsMay=  0;\n          var  NbTotalRoomNightsJune=  0;\n          var  NbTotalRoomNightsJuly=  0;\n          var  NbTotalRoomNightsAugust=  0;\n          var  NbTotalRoomNightsSeptember=  0;\n  \n        if (SplitTotalRoomAvailable) {\n          NbOccupiedRoomNightsAvril= SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M1:0:0;\n          NbOccupiedRoomNightsMay=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M2:0:0;\n          NbOccupiedRoomNightsJune=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M3:0:0;\n          NbOccupiedRoomNightsJuly=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M4:0:0;\n          NbOccupiedRoomNightsAugust=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M5:0:0;\n          NbOccupiedRoomNightsSeptember=  SplitTotalRoomAvailable['NbOfOccupiedRooms']?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6?SplitTotalRoomAvailable['NbOfOccupiedRooms'].M6:0:0;\n          NbTotalRoomNightsAvril=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M1:0:0;\n          NbTotalRoomNightsMay=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M2:0:0;\n          NbTotalRoomNightsJune=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M3:0:0;\n          NbTotalRoomNightsJuly=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M4:0:0;\n          NbTotalRoomNightsAugust=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M5:0:0;\n          NbTotalRoomNightsSeptember=  SplitTotalRoomAvailable['TotalRoomNightAvailable']?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6?SplitTotalRoomAvailable['TotalRoomNightAvailable'].M6:0:0;\n        }\n\n        var SplitTotalRoomAvailable = result.data['SplitTotalRoomAvailable-total'];\n        var OccupancyRateApril = 0;\n        var OccupancyRateMay = 0;\n        var OccupancyRateJune = 0;\n        var OccupancyRateJuly = 0;\n        var OccupancyRateAugust = 0;\n        var OccupancyRateSeptember = 0;\n\n        if (SplitTotalRoomAvailable) {\n\n          OccupancyRateApril = SplitTotalRoomAvailable.M1?SplitTotalRoomAvailable.M1:0;\n          OccupancyRateMay = SplitTotalRoomAvailable.M2?SplitTotalRoomAvailable.M2:0;\n          OccupancyRateJune = SplitTotalRoomAvailable.M3?SplitTotalRoomAvailable.M3:0;\n          OccupancyRateJuly = SplitTotalRoomAvailable.M4?SplitTotalRoomAvailable.M4:0;\n          OccupancyRateAugust =SplitTotalRoomAvailable.M5?SplitTotalRoomAvailable.M5:0;\n          OccupancyRateSeptember =SplitTotalRoomAvailable.M6?SplitTotalRoomAvailable.M6:0;\n\n        }\n\n        //\n      var Result = result.data;\n        \n\n       \n       const resultSurvey = await API.graphql(graphqlOperation(createSurvey, {input:{ IsHotelClosed, IsHotelContainmentZone, HotelContainmentEndDate, HotelReopeningDate, \n          NbBookings, NbRoomNightsBooked, NbRoomNightsCanceled,\n          NbRoomNightsBookedFIT, NbRoomNightsBookedMICE, NbRoomNightsBookedCorporate, RemainingRoomNightsBySegment,\n          RoomNightsCountry1, NbRoomNightsBookedCountry1, RoomNightsCountry2, NbRoomNightsBookedCountry2, RoomNightsCountry3, NbRoomNightsBookedCountry3,\n          RoomNightsCountry4, NbRoomNightsBookedCountry4, RoomNightsCountry5, NbRoomNightsBookedCountry5, NbRoomNightsBookedLastWeekApril, NbRoomNightsBookedLastWeekMay,\n          NbRoomNightsBookedLastWeekAugust, NbRoomNightsBookedLastWeekSeptember, TotalNightsBookedLastWeek, NbRoomNightsBookedLastWeekJune, NbRoomNightsBookedLastWeekJuly,\n          TotalNumberRoomAvailable, NbOccupiedRoomNightsAvril,NbOccupiedRoomNightsAugust, NbOccupiedRoomNightsJuly, NbOccupiedRoomNightsJune, NbOccupiedRoomNightsMay,\n          NbOccupiedRoomNightsSeptember,NbTotalRoomNightsAugust, NbTotalRoomNightsAvril, NbTotalRoomNightsJuly, NbTotalRoomNightsJune, NbTotalRoomNightsMay, NbTotalRoomNightsSeptember, \n         OccupancyRateApril, OccupancyRateAugust, OccupancyRateJuly, OccupancyRateJune, OccupancyRateMay, OccupancyRateSeptember, Week, Result, HotelLocation\n        } }));\n\n        console.log(resultSurvey);\n        \n        if (NbRoomNightsBookedCountry1>0) {\n          await API.graphql(graphqlOperation(createClientCountry, {input:{'Country':RoomNightsCountry1, 'NumberOfClientBookings':NbRoomNightsBookedCountry1, Week }}));\n        }\n        if (NbRoomNightsBookedCountry2>0) {\n          await API.graphql(graphqlOperation(createClientCountry, {input:{'Country':RoomNightsCountry2, 'NumberOfClientBookings':NbRoomNightsBookedCountry2, Week }}));\n        }\n        if (NbRoomNightsBookedCountry3>0) {\n          await API.graphql(graphqlOperation(createClientCountry, {input:{'Country':RoomNightsCountry3, 'NumberOfClientBookings':NbRoomNightsBookedCountry3, Week }}));\n        }\n        if (NbRoomNightsBookedCountry4>0) {\n          await API.graphql(graphqlOperation(createClientCountry, {input:{'Country':RoomNightsCountry4, 'NumberOfClientBookings':NbRoomNightsBookedCountry4, Week }}));\n        }\n        if (NbRoomNightsBookedCountry5>0) {\n          await API.graphql(graphqlOperation(createClientCountry, {input:{'Country':RoomNightsCountry5, 'NumberOfClientBookings':NbRoomNightsBookedCountry5, Week }}));\n        }\n\n        //await API.graphql(graphqlOperation(createTracking, {input:{'Email':this.props.userAttributes.email, 'Sub':this.props.userAttributes.sub, Week }}));\n        \n        this.setState({ isCompleted: true});\n        history.push('/Final');\n      } else {\n        history.push('/FinalRetry');\n      }\n\n\n     \n    } catch (err) {\n      console.error(\"error during delete\", err);\n    }\n  }\n\n  render() {\n\n\n   \n    var json = (this.props.hotelLocation === \"\")? firstSurvey : finalSurvey;\n    \n\n    var surveyRender = !this.state.isCompleted ? (\n      <Survey.Survey\n        json={json}\n        //data={data}\n        showCompletedPage={false}\n        onComplete={this.onCompleteComponent}\n      />\n    ) : null;\n\n    \n    /*var onCompleteComponent = this.state.isCompleted ? (\n    ) : null;*/\n\n    return (\n      <div>\n        {surveyRender}\n      </div>\n    );\n  }\n}\n\nexport default SurveyComponent;"]},"metadata":{},"sourceType":"module"}